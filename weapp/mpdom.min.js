!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).MPDOM=t()}(function(){var define,module,exports;return function n(i,r,s){function a(e,t){if(!r[e]){if(!i[e]){var o="function"==typeof require&&require;if(!t&&o)return o(e,!0);if(l)return l(e,!0);throw(o=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",o}o=r[e]={exports:{}},i[e][0].call(o.exports,function(t){return a(i[e][1][t]||t)},o,o.exports,n,i,r,s)}return r[e].exports}for(var l="function"==typeof require&&require,t=0;t<s.length;t++)a(s[t]);return a}({1:[function(t,e,o){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},s=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function n(t){try{r(l.next(t))}catch(t){e(t)}}function i(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,i)}r((l=l.apply(t,s||[])).next())})},a=this&&this.__generator||function(o,n){var i,r,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(o,a)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.WXApp=o.BrowserApp=void 0;var l=t("./page"),n=t("./router"),t=(i.prototype.setupPageScrollListener=function(){var e=this;document.addEventListener("scroll",function(){var t;document.documentElement.scrollHeight>innerHeight&&window.pageYOffset+innerHeight>=document.documentElement.scrollHeight&&(t=(null===(t=e.engine.app)||void 0===t?void 0:t.router).history)[t.length-1].item.onReachBottom()})},i.prototype.getURLSearchParams=function(){try{for(var t={},e=new URL(window.location.href).searchParams,o=e.keys(),n=o.next();!n.done&&(t[n.value]=e.get(n.value),!(n=o.next()).done););return t}catch(t){return console.error(t),{}}},i.prototype.setupFirstPage=function(o,n){var i;return s(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return o=o||(this.router.isPathRewriteEnabled?{route:new URL(window.location.href).pathname||"/",params:this.getURLSearchParams()}:(delete(e=r({},this.getURLSearchParams())).route,{route:new URL(window.location.href).searchParams.get("route")||"/",params:e})),(e=new l.Page(this.rootElement,this.engine,o)).isFirst=!0,n?(this.router.history.forEach(function(t){return t.item.active=!1}),this.router.history[0]={item:e,scrollPosition:0}):this.router.history.push({item:e,scrollPosition:0}),[4,e.ready()];case 1:return t.sent(),this.router.didSetupFirst(e.viewId,null!==(i=null==o?void 0:o.route)&&void 0!==i?i:"/",null!==(i=null==o?void 0:o.params)&&void 0!==i?i:{}),[2]}})})},i.prototype.enablePathRewrite=function(){this.router.isPathRewriteEnabled=!0},i);function i(t,e){this.rootElement=t,this.engine=e,this.router=new n.BrowserRouter(this.engine),(e.app=this).setupPageScrollListener()}o.BrowserApp=t;t=function(t,e){this.indexPage=t,this.engine=e,this.router=new n.WXRouter(this.engine),e.app=this};o.WXApp=t},{"./page":46,"./router":47}],2:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.AbsorbPointer=void 0;var r,s=t("../../env"),t=t("../component_view"),i=(r=t.ComponentView,i(a,r),a.prototype.elementType=function(){return"div"},a.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),s.MPEnv.platformType===s.PlatformType.browser?this.htmlElement.onclick=function(t){t&&t.stopPropagation()}:this.htmlElement.onclick=function(t){}},a);function a(){return null!==r&&r.apply(this,arguments)||this}o.AbsorbPointer=i},{"../../env":42,"../component_view":27}],3:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ClipOval=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),i=(r=s.ComponentView,i(l,r),l.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),(0,a.setDOMStyle)(this.htmlElement,{borderRadius:"50%",overflow:"hidden"})},l);function l(){return null!==r&&r.apply(this,arguments)||this}o.ClipOval=i},{"../component_view":27,"../dom_utils":29}],4:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ClipRRectAncestor=o.ClipRRect=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),l=t("../utils"),t=(r=s.ComponentView,i(c,r),c.prototype.setAttributes=function(t){var e;r.prototype.setAttributes.call(this,t);var t=t.borderRadius?(0,l.cssBorderRadius)(t.borderRadius):{};t.borderRadius?(0,a.setDOMStyle)(this.htmlElement,{borderRadius:null!==(e=t.borderRadius)&&void 0!==e?e:"unset",overflow:"hidden"}):(0,a.setDOMStyle)(this.htmlElement,{borderTopLeftRadius:null!==(e=t.borderTopLeftRadius)&&void 0!==e?e:"unset",borderTopRightRadius:null!==(e=t.borderTopRightRadius)&&void 0!==e?e:"unset",borderBottomLeftRadius:null!==(e=t.borderBottomLeftRadius)&&void 0!==e?e:"unset",borderBottomRightRadius:null!==(t=t.borderBottomRightRadius)&&void 0!==t?t:"unset",overflow:"hidden"})},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.ClipRRect=t;var u,i=(u=s.AncestorView,i(p,u),p.prototype.setAttributes=function(t){var e;u.prototype.setAttributes.call(this,t),this.target.ancestorStyle.opacity||(this.target.ancestorStyle.opacity=1);var t=t.borderRadius?(0,l.cssBorderRadius)(t.borderRadius):{};t.borderRadius?this.target.ancestorStyle.borderRadius=null!==(e=t.borderRadius)&&void 0!==e?e:"unset":(this.target.ancestorStyle.borderTopLeftRadius=null!==(e=t.borderTopLeftRadius)&&void 0!==e?e:"unset",this.target.ancestorStyle.borderTopRightRadius=null!==(e=t.borderTopRightRadius)&&void 0!==e?e:"unset",this.target.ancestorStyle.borderBottomLeftRadius=null!==(e=t.borderBottomLeftRadius)&&void 0!==e?e:"unset",this.target.ancestorStyle.borderBottomRightRadius=null!==(t=t.borderBottomRightRadius)&&void 0!==t?t:"unset"),this.target.ancestorStyle.overflow="hidden"},p);function p(){return null!==u&&u.apply(this,arguments)||this}o.ClipRRectAncestor=i},{"../component_view":27,"../dom_utils":29,"../utils":36}],5:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.CollectionViewLayout=o.CollectionView=void 0;var r,s=t("../../env"),a=t("../component_view"),c=t("../dom_utils"),u=t("../utils"),l=t("./sliver_persistent_header"),i=(r=a.ComponentView,i(p,r),p.prototype.addBrowserScrollListener=function(){var e=this;this.htmlElement.addEventListener("scroll",function(t){e.lastScrollX=e.htmlElement.scrollLeft,e.lastScrollY=e.htmlElement.scrollTop})},p.prototype.didMoveToWindow=function(){var t=this;r.prototype.didMoveToWindow.call(this),this.enabledRestoration&&s.MPEnv.platformType===s.PlatformType.browser&&(this.htmlElement.scrollTo({left:this.lastScrollX,top:this.lastScrollY}),setTimeout(function(){t.htmlElement.scrollTo({left:t.lastScrollX,top:t.lastScrollY})},0))},p.prototype.setConstraints=function(t){r.prototype.setConstraints.call(this,t),this.viewWidth===t.w&&this.viewHeight===t.h||(this.viewWidth=t.w,this.viewHeight=t.h,this.reloadLayouts())},p.prototype.reloadLayouts=function(){var t;this.layout.prepareLayout();for(var e=-this.appBarPersistentHeight,o=this.appBarPersistentHeight,n=0;n<this.subviews.length;n++){var i=this.subviews[n],r=this.layout.layoutAttributesForItemAtIndex(n);r&&(i.collectionViewConstraints={top:r.y.toFixed(1)+"px",left:r.x.toFixed(1)+"px"},(0,c.setDOMStyle)(i.htmlElement,{position:"absolute",top:r.y.toFixed(1)+"px",left:r.x.toFixed(1)+"px",width:r.width.toFixed(1)+"px",height:r.height.toFixed(1)+"px"}),i instanceof l.SliverPersistentHeader&&i.pinned?(i.y=r.y-e,i.h=o,e+=i.y+(null!==(t=null===(t=i.constraints)||void 0===t?void 0:t.h)&&void 0!==t?t:0),o+=null!==(t=null===(t=i.constraints)||void 0===t?void 0:t.h)&&void 0!==t?t:0,i.updateLayout()):i instanceof l.SliverPersistentHeader&&i.lazying&&(i.y=r.y-e,i.h=o,e+=i.y+(null!==(r=null===(r=i.constraints)||void 0===r?void 0:r.h)&&void 0!==r?r:0),o+=null!==(r=null===(r=i.constraints)||void 0===r?void 0:r.h)&&void 0!==r?r:0,i.updateLayout()))}var s=this.layout.collectionViewContentSize();(0,c.setDOMStyle)(this.wrapperHtmlElement,{position:"absolute",top:"0px",left:"0px",width:s.width+"px",height:this.bottomBarWithSafeArea?"calc("+(s.height+this.bottomBarHeight)+"px + env(safe-area-inset-bottom))":s.height+this.bottomBarHeight+"px"})},p.prototype.setAttributes=function(t){var e;r.prototype.setAttributes.call(this,t),(0,c.setDOMStyle)(this.htmlElement,{overflow:t.isRoot?"unset":"scroll"}),this.bottomBarHeight=null!==(e=t.bottomBarHeight)&&void 0!==e?e:0,this.bottomBarWithSafeArea=null!==(e=t.bottomBarWithSafeArea)&&void 0!==e&&e,t.restorationId&&s.MPEnv.platformType==s.PlatformType.wxMiniProgram?this.htmlElement.setTag("scrollview"):t.restorationId&&s.MPEnv.platformType==s.PlatformType.browser&&(this.enabledRestoration=!0,this.addBrowserScrollListener())},p.prototype.addSubview=function(t){t.superview&&t.removeFromSuperview(),this.subviews.push(t),(t.superview=this).wrapperHtmlElement.appendChild(t.htmlElement),t.didMoveToWindow()},p.prototype.setPinnedAppBar=function(t){var i,r,s,a=this,l=this.factory.create(t.appBarPinned,this.document);l&&(l.collectionViewFixed=!0,i=null!==(t=null===(t=l.constraints)||void 0===t?void 0:t.h)&&void 0!==t?t:0,r=0,s=1===(null==l?void 0:l.subviews.length)?0:1,null!=l&&l.subviews.slice().forEach(function(t,e){var o,n;e===s-1&&(r+=null!==(o=null===(o=t.constraints)||void 0===o?void 0:o.h)&&void 0!==o?o:0),e===s?((0,c.setDOMStyle)(t.htmlElement,{marginTop:-(i-r)+"px",top:"0px",position:"sticky",zIndex:"9999",backgroundColor:(null!==(e=null===(e=l.attributes)||void 0===e?void 0:e.color)&&void 0!==e?e:null!==(n=l.attributes)&&void 0!==n&&n.backgroundColor)?(0,u.cssColor)(null!==(n=null===(n=l.attributes)||void 0===n?void 0:n.color)&&void 0!==n?n:null===(n=l.attributes)||void 0===n?void 0:n.backgroundColor):"unset"}),a.appBarPersistentHeight=(0,u.cssSizeFromMPElement)(t).height):(0,c.setDOMStyle)(t.htmlElement,{marginTop:-i+"px"}),a.appBarPinnedViews.push(t)}),this.appBarPinnedViews.reverse().forEach(function(t){return a.addSubviewForPinnedAppBar(t)}),(0,c.setDOMStyle)(l.htmlElement,{pointerEvents:"none",display:"none"}))},p.prototype.addSubviewForPinnedAppBar=function(t){t.superview&&t.removeFromSuperview(),(t.superview=this).wrapperHtmlElement.firstChild?this.wrapperHtmlElement.insertBefore(t.htmlElement,this.wrapperHtmlElement.firstChild):this.wrapperHtmlElement.appendChild(t.htmlElement),t.didMoveToWindow()},p);function p(t){t=r.call(this,t)||this;return t.classname="CollectionView",t.wrapperHtmlElement=t.document.createElement("div"),t.appBarPinnedViews=[],t.appBarPersistentHeight=0,t.enabledRestoration=!1,t.lastScrollX=0,t.lastScrollY=0,t.viewWidth=0,t.viewHeight=0,t.bottomBarHeight=0,t.bottomBarWithSafeArea=!1,t.htmlElement.appendChild(t.wrapperHtmlElement),t}o.CollectionView=i;d.prototype.prepareLayout=function(){},d.prototype.layoutAttributesForItemAtIndex=function(t){throw""},d.prototype.collectionViewContentSize=function(){throw""},i=d;function d(t){this.collectionView=t}o.CollectionViewLayout=i},{"../../env":42,"../component_view":27,"../dom_utils":29,"../utils":36,"./sliver_persistent_header":22}],6:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ColoredBox=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),l=t("../utils"),i=(r=s.ComponentView,i(c,r),c.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),(0,a.setDOMStyle)(this.htmlElement,{backgroundColor:t.color?(0,l.cssColor)(t.color):"unset"})},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.ColoredBox=i},{"../component_view":27,"../dom_utils":29,"../utils":36}],7:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function n(t){try{r(l.next(t))}catch(t){e(t)}}function i(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,i)}r((l=l.apply(t,s||[])).next())})},a=this&&this.__generator||function(o,n){var i,r,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(o,a)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.CustomPaint=o.MPDrawable=void 0;var l=t("../../env"),r=t("../component_view"),c=t("../dom_utils"),u=t("../utils"),t=(p.prototype.decodeDrawable=function(n){return s(this,void 0,void 0,function(){var e,o;return a(this,function(t){switch(t.label){case 0:l.MPEnv.platformType!==l.PlatformType.wxMiniProgram&&l.MPEnv.platformType!==l.PlatformType.swanMiniProgram||p.offscreenCanvas||(p.offscreenCanvas=l.MPEnv.platformScope.createOffscreenCanvas()),t.label=1;case 1:return t.trys.push([1,7,,8]),"networkImage"!==n.type?[3,3]:[4,this.decodeNetworkImage(n.url,n.target)];case 2:return e=t.sent(),this.engine.sendMessage(JSON.stringify({type:"decode_drawable",message:{event:"onDecode",target:n.target,width:e.width,height:e.height}})),[3,6];case 3:return"memoryImage"!==n.type?[3,5]:[4,this.decodeMemoryImage(n.data,n.target)];case 4:return e=t.sent(),this.engine.sendMessage(JSON.stringify({type:"decode_drawable",message:{event:"onDecode",target:n.target,width:e.width,height:e.height}})),[3,6];case 5:throw new Error("Unknown drawable type.");case 6:return[3,8];case 7:return o=t.sent(),this.engine.sendMessage(JSON.stringify({type:"decode_drawable",message:{event:"onError",target:n.target,error:null==o?void 0:o.toString()}})),[3,8];case 8:return[2]}})})},p.prototype.decodeNetworkImage=function(i,r){return s(this,void 0,void 0,function(){var n=this;return a(this,function(t){return[2,new Promise(function(t,e){var o=l.MPEnv.platformType===l.PlatformType.wxMiniProgram||l.MPEnv.platformType===l.PlatformType.swanMiniProgram?p.offscreenCanvas.createImage():document.createElement("img");o.onload=function(){n.decodedDrawables[r]=o,t({width:o.width,height:o.height})},o.onerror=function(){e("")},o.src=i})]})})},p.prototype.decodeMemoryImage=function(i,r){return s(this,void 0,void 0,function(){var n=this;return a(this,function(t){return[2,new Promise(function(t,e){var o=l.MPEnv.platformType===l.PlatformType.wxMiniProgram||l.MPEnv.platformType===l.PlatformType.swanMiniProgram?p.offscreenCanvas.createImage():document.createElement("img");o.onload=function(){n.decodedDrawables[r]=o,t({width:o.width,height:o.height})},o.onerror=function(){e("")},o.src="data:text/plain;base64,"+i})]})})},p);function p(t){this.engine=t,this.decodedDrawables={}}o.MPDrawable=t;var d,i=(d=r.ComponentView,i(h,d),h.prototype.elementType=function(){return"canvas"},h.prototype.setConstraints=function(t){var e,o,n;t&&(e=t.x,o=t.y,n=t.w,t=t.h,"number"==typeof e&&"number"==typeof o&&"number"==typeof n&&"number"==typeof t&&((0,c.setDOMStyle)(this.htmlElement,{left:e+"px",top:o+"px",width:n+"px",height:t+"px"}),this.canvasWidth===n&&this.canvasHeight==t||(this.canvasWidth=n,this.canvasHeight=t,(0,c.setDOMAttribute)(this.htmlElement,"width",this.canvasWidth.toString()),(0,c.setDOMAttribute)(this.htmlElement,"height",this.canvasHeight.toString()))))},h.prototype.createContext=function(){return s(this,void 0,void 0,function(){var e=this;return a(this,function(t){return l.MPEnv.platformType===l.PlatformType.wxMiniProgram||l.MPEnv.platformType===l.PlatformType.swanMiniProgram?[2,new Promise(function(r){setTimeout(function(){return s(e,void 0,void 0,function(){var e,o,n,i;return a(this,function(t){switch(t.label){case 0:return[4,this.htmlElement.getFields({node:!0,size:!0})];case 1:return e=t.sent(),o=e.node,n=o.getContext("2d"),i=l.MPEnv.platformScope.getSystemInfoSync().pixelRatio,o.width=e.width*i,o.height=e.height*i,n.scale(i,i),r(n),[2]}})})},16)})]:[2,this.htmlElement.getContext("2d")]})})},h.prototype.setAttributes=function(i){var r;return s(this,void 0,void 0,function(){var e,o,n=this;return a(this,function(t){switch(t.label){case 0:return(d.prototype.setAttributes.call(this,i),null===(r=this.ctx)||void 0===r)?[3,1]:(o=r,[3,3]);case 1:return[4,this.createContext()];case 2:o=t.sent(),t.label=3;case 3:return(e=o)?(this.ctx||(this.ctx=e),e.save(),i.commands.forEach(function(t){"drawRect"===t.action?n.drawRect(e,t):"drawPath"===t.action?n.drawPath(e,t):"drawDRRect"===t.action?n.drawDRRect(e,t):"clipPath"===t.action?n.drawPath(e,t):"drawColor"===t.action?n.drawColor(e,t):"drawImage"===t.action?n.drawImage(e,t):"drawImageRect"===t.action?n.drawImageRect(e,t):"restore"===t.action?e.restore():"rotate"===t.action?e.rotate(t.radians):"save"===t.action?e.save():"scale"===t.action?e.scale(t.sx,t.sy):"skew"===t.action?e.transform(1,t.sy,t.sx,1,0,0):"transform"===t.action?e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty):"translate"===t.action&&e.translate(t.dx,t.dy)}),e.restore(),[2]):[2]}})})},h.prototype.drawRect=function(t,e){this.setPaint(t,e.paint),"PaintingStyle.fill"===e.paint.style?t.fillRect(e.x,e.y,e.width,e.height):t.strokeRect(e.x,e.y,e.width,e.height)},h.prototype.drawPath=function(t,e){this.setPaint(t,e.paint),this.drawRealPath(t,e.path),"clipPath"===e.action?t.clip():"PaintingStyle.fill"===e.paint.style?t.fill():t.stroke()},h.prototype.drawDRRect=function(t,e){var o=document.createElement("canvas");o.width=t.canvas.width,o.height=t.canvas.height;var n=o.getContext("2d");this.setPaint(n,e.paint),this.drawRealPath(n,e.outer),"PaintingStyle.fill"===e.paint.style?n.fill():n.stroke(),n.save(),n.fillStyle="white",n.globalCompositeOperation="xor",this.drawRealPath(n,e.inner),n.fill(),n.restore(),t.drawImage(o,0,0)},h.prototype.drawRealPath=function(e,t){e.beginPath(),t.commands.forEach(function(t){"moveTo"===t.action?e.moveTo(t.x,t.y):"lineTo"===t.action?e.lineTo(t.x,t.y):"quadraticBezierTo"===t.action?e.quadraticCurveTo(t.x1,t.y1,t.x2,t.y2):"cubicTo"===t.action?e.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3):"arcTo"===t.action?e.ellipse(t.x,t.y,t.width/2,t.height/2,0,t.startAngle,t.startAngle+t.sweepAngle,t.sweepAngle<0):"arcToPoint"===t.action?e.arcTo(t.arcControlX,t.arcControlY,t.arcEndX,t.arcEndY,t.radiusX):"close"===t.action&&e.closePath()})},h.prototype.drawColor=function(t,e){"BlendMode.clear"===e.blendMode?t.clearRect(0,0,t.canvas.width,t.canvas.height):(t.fillStyle=(0,u.cssColor)(e.color),t.fillRect(0,0,t.canvas.width,t.canvas.height))},h.prototype.drawImage=function(t,e){this.setPaint(t,e.paint);var o=this.engine.drawable.decodedDrawables[e.drawable];o&&t.drawImage(o,e.dx,e.dy)},h.prototype.drawImageRect=function(t,e){this.setPaint(t,e.paint);var o=this.engine.drawable.decodedDrawables[e.drawable];o&&t.drawImage(o,e.srcX,e.srcY,e.srcW,e.srcH,e.dstX,e.dstY,e.dstW,e.dstH)},h.prototype.setPaint=function(t,e){e&&(t.lineWidth=e.strokeWidth,t.miterLimit=e.strokeMiterLimit,t.lineCap=e.strokeCap.replace("StrokeCap.",""),t.lineJoin=e.strokeJoin.replace("StrokeJoin.",""),"PaintingStyle.fill"===e.style?(t.fillStyle=(0,u.cssColor)(e.color),t.strokeStyle="transparent"):(t.fillStyle="transparent",t.strokeStyle=(0,u.cssColor)(e.color)),t.globalAlpha=null!==(e=e.alpha)&&void 0!==e?e:1)},h);function h(){var t=null!==d&&d.apply(this,arguments)||this;return t.canvasWidth=0,t.canvasHeight=0,t}o.CustomPaint=i},{"../../env":42,"../component_view":27,"../dom_utils":29,"../utils":36}],8:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),f=this&&this.__assign||function(){return(f=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.CustomScrollView=void 0;var c,m=t("../utils"),r=t("./collection_view"),v=t("./grid_list_layout"),t=(c=r.CollectionView,i(s,c),s.prototype.setChildren=function(t){var r,s,a,l=this;t&&(r=[],s={},a={},t.forEach(function(t,e){var o,n,i;"sliver_list"===t.name&&t.children?(s[r.length]=t.attributes,l.factory.fetchCachedChildren(t.children).forEach(function(t){r.push(t)}),a[r.length-1]=!0):"sliver_list"===(null===(o=null===(o=t.children)||void 0===o?void 0:o[0])||void 0===o?void 0:o.name)&&null!==(n=null===(n=t.children)||void 0===n?void 0:n[0])&&void 0!==n&&n.children?(s[r.length]=t.children[0].attributes,l.factory.fetchCachedChildren(t.children[0].children).forEach(function(t,e){r.push(t)}),a[r.length-1]=!0):"sliver_grid"===t.name&&t.children?(s[r.length]=t.attributes,l.factory.fetchCachedChildren(t.children).forEach(function(t){r.push(t)}),a[r.length-1]=!0):"sliver_grid"===(null===(n=null===(n=t.children)||void 0===n?void 0:n[0])||void 0===n?void 0:n.name)&&null!==(i=null===(i=t.children)||void 0===i?void 0:i[0])&&void 0!==i&&i.children?(s[r.length]=t.children[0].attributes,l.factory.fetchCachedChildren(t.children[0].children).forEach(function(t){r.push(t)}),a[r.length-1]=!0):r.push(t)}),this.listChildren=r,this.layout.items=r,this.layout.sliverGridAttributes=s,this.layout.sliverGridEndIndex=a,c.prototype.setChildren.call(this,r),this.reloadLayouts())},s.prototype.setAttributes=function(t){c.prototype.setAttributes.call(this,t),this.layout.isHorizontalScroll="Axis.horizontal"===t.scrollDirection,t.appBarPinned?this.setPinnedAppBar(t):this.appBarPinnedViews.length&&(this.appBarPinnedViews.forEach(function(t){return t.removeFromSuperview()}),this.appBarPinnedViews=[],this.appBarPersistentHeight=0)},s);function s(t){t=c.call(this,t)||this;return t.listChildren=[],t.layout=new l(t),t}o.CustomScrollView=t;var a,l=(a=r.CollectionViewLayout,i(u,a),u.prototype.prepareLayout=function(){var a,l,c,u,p=this,d=this.collectionView.viewWidth,h=this.collectionView.viewHeight;this.isHorizontalScroll&&h<=.01||!this.isHorizontalScroll&&d<=.01||(a=[],u=l=0,this.items.forEach(function(t,e){var o;if(p.sliverGridAttributes[e]){u=0,(c=new v.GridListLayout(p.collectionView)).isHorizontalScroll=p.isHorizontalScroll;for(var n=[],i=e;i<p.items.length&&(n.push(p.items[i]),!p.sliverGridEndIndex[i]);i++);c.clientWidth=p.collectionView.viewWidth,c.clientHeight=p.collectionView.viewHeight;var r,s=p.sliverGridAttributes[e].gridDelegate;s&&(c.isPlain="SliverWaterfallDelegate"!==s.classname,c.crossAxisCount=s.crossAxisCount,c.mainAxisSpacing=s.mainAxisSpacing,c.crossAxisSpacing=s.crossAxisSpacing),p.sliverGridAttributes[e].padding&&(r=(0,m.cssPadding)(p.sliverGridAttributes[e].padding),c.padding.top=parseFloat(null!==(s=r.paddingTop)&&void 0!==s?s:"0.0"),c.padding.left=parseFloat(null!==(s=r.paddingLeft)&&void 0!==s?s:"0.0"),c.padding.bottom=parseFloat(null!==(s=r.paddingBottom)&&void 0!==s?s:"0.0"),c.padding.right=parseFloat(null!==(r=r.paddingRight)&&void 0!==r?r:"0.0")),c.items=n,c.prepareLayout()}if(c&&(u<c.itemLayouts.length?(r=f({},c.itemLayouts[u]),p.isHorizontalScroll?r.x+=l:r.y+=l,a.push(r)):a.push({x:0,y:0,width:0,height:0}),u++),p.sliverGridEndIndex[e]&&c)return p.isHorizontalScroll?l+=c.collectionViewContentSize().width:l+=c.collectionViewContentSize().height,p.maxVLength=l,void(c=void 0);c||(e=(0,m.cssSizeFromMPElement)(t),p.isHorizontalScroll?(o={x:l,y:0,width:e.width,height:h},l+=e.width):(o={x:0,y:l,width:d,height:e.height},"sliver_persistent_header"===t.name&&t.attributes.lazying||(l+=e.height)),p.maxVLength=l,a.push(o))}),this.itemLayouts=a)},u.prototype.collectionViewContentSize=function(){return this.isHorizontalScroll?{width:this.maxVLength,height:this.collectionView.viewHeight}:{width:this.collectionView.viewWidth,height:this.maxVLength}},u.prototype.layoutAttributesForItemAtIndex=function(t){return this.itemLayouts[t]},u);function u(){var t=null!==a&&a.apply(this,arguments)||this;return t.isHorizontalScroll=!1,t.items=[],t.maxVLength=0,t.itemLayouts=[],t.sliverGridAttributes={},t.sliverGridEndIndex={},t}},{"../utils":36,"./collection_view":5,"./grid_list_layout":13}],9:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.DecoratedBox=void 0;var s,r=t("../component_view"),a=t("../dom_utils"),l=t("../utils"),i=(s=r.ComponentView,i(c,s),c.prototype.setAttributes=function(t){var e=this;s.prototype.setAttributes.call(this,t);var o,n,i,r={};if(t.color?r.backgroundColor=(0,l.cssColor)(t.color):r.backgroundColor="unset",t.image&&(r.backgroundImage='url("'+(t.image.src||(t.image.assetName?e.engine.debugger?t.image.assetPkg?"http://"+e.engine.debugger.serverAddr+"/assets/packages/"+t.image.assetPkg+"/"+t.image.assetName:"http://"+e.engine.debugger.serverAddr+"/assets/"+t.image.assetName:t.image.assetPkg?"assets/packages/"+t.image.assetPkg+"/"+t.assetName:"assets/"+t.image.assetName:void 0))+'")',"BoxFit.cover"===t.image.fit?r.backgroundSize="cover":r.backgroundSize="contain",r.backgroundRepeat="no-repeat"),null!==(e=t.decoration)&&void 0!==e&&e.gradient&&(r.backgroundImage?r.backgroundImage=(0,l.cssGradient)(t.decoration.gradient)+","+r.backgroundImage:r.background=(0,l.cssGradient)(t.decoration.gradient)),null!==(e=null===(e=t.decoration)||void 0===e?void 0:e.boxShadow)&&void 0!==e&&e[0]&&(o=null===(e=null===(o=t.decoration)||void 0===o?void 0:o.boxShadow)||void 0===e?void 0:e[0],r.boxShadow=(null===(e=(0,l.cssOffset)(o.offset))||void 0===e?void 0:e.dx)+"px "+(null===(e=(0,l.cssOffset)(o.offset))||void 0===e?void 0:e.dy)+"px "+o.blurRadius+"px "+o.spreadRadius+"px "+(0,l.cssColor)(o.color)),null!==(o=t.decoration)&&void 0!==o&&o.borderRadius)for(i in n=(0,l.cssBorderRadius)(t.decoration.borderRadius))r[i]=n[i];if(null!==(o=t.decoration)&&void 0!==o&&o.border)for(i in(n=(0,l.cssBorder)(t.decoration.border)).boxSizing="border-box",n)r[i]=n[i];(0,a.setDOMStyle)(this.htmlElement,r)},c);function c(){return null!==s&&s.apply(this,arguments)||this}o.DecoratedBox=i},{"../component_view":27,"../dom_utils":29,"../utils":36}],10:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.EditableText=void 0;var s,a=t("../../env"),l=t("../component_view"),c=t("../dom_utils"),u=t("../utils"),i=(s=l.ComponentView,i(p,s),p.prototype.setAttributes=function(t){var e,o=this;s.prototype.setAttributes.call(this,t);var n,i=t.maxLines;1<i&&"textarea"!==this.contentElementType?(null!==(e=this.contentElement)&&void 0!==e&&e.remove(),this.contentElement=this.document.createElement("textarea"),(0,c.setDOMStyle)(this.contentElement,{width:"100%",height:"100%",backgroundColor:"transparent",border:"none",resize:"none"}),this.htmlElement.appendChild(this.contentElement)):i<=1&&"input"!==this.contentElementType&&(null!==(n=this.contentElement)&&void 0!==n&&n.remove(),this.contentElement=this.document.createElement("input"),(0,c.setDOMStyle)(this.contentElement,{width:"100%",height:"100%",backgroundColor:"transparent",border:"none"}),this.htmlElement.appendChild(this.contentElement)),this.contentElement&&(this.contentElement.onkeyup=function(t){"Enter"!==t.key&&13!==t.keyCode||o._onSubmitted(t.target,t.target.value)},this.contentElement.onsubmit=function(t){var e;o._onSubmitted(t.target,null!==(e=null===(e=t.detail)||void 0===e?void 0:e.value)&&void 0!==e?e:t.target.value)},this.contentElement.oninput=function(t){var e;o._onChanged(t.target,null!==(e=null===(e=t.detail)||void 0===e?void 0:e.value)&&void 0!==e?e:t.target.value)},this.contentElement.onchange=function(t){var e;o._onChanged(t.target,null!==(e=null===(e=t.detail)||void 0===e?void 0:e.value)&&void 0!==e?e:t.target.value)},t.style&&(delete(n=(0,u.cssTextStyle)(t.style)).userSelect,delete n.WebkitUserSelect,(0,c.setDOMStyle)(this.contentElement,r(r({},n),{textAlign:(0,u.cssTextAlign)(t.textAlign),boxSizing:"border-box"}))),(0,c.setDOMAttribute)(this.contentElement,"type",t.obscureText?"password":this._keyboardType(t.keyboardType)),(0,c.setDOMAttribute)(this.contentElement,"pattern",this._keyboardPattern(t.keyboardType)),t.value&&(a.MPEnv.platformType===a.PlatformType.wxMiniProgram||a.MPEnv.platformType===a.PlatformType.swanMiniProgram?(0,c.setDOMAttribute)(this.contentElement,"value",t.value):this.contentElement.value=t.value),t.autofocus&&(0,c.setDOMAttribute)(this.contentElement,"autoFocus",t.autofocus),t.autoCorrect&&(0,c.setDOMAttribute)(this.contentElement,"autoCorrect",t.autoCorrect),t.placeholder&&(0,c.setDOMAttribute)(this.contentElement,"placeholder",t.placeholder),(0,c.setDOMAttribute)(this.contentElement,"readOnly",t.readOnly?"true":void 0))},p.prototype.setChildren=function(){},p.prototype._keyboardType=function(t){return 0<(null==t?void 0:t.indexOf("TextInputType.number"))?"number":"text"},p.prototype._keyboardPattern=function(t){if(0<(null==t?void 0:t.indexOf("TextInputType.number"))){var e=0<t.indexOf("signed: true"),t=0<t.indexOf("decimal: true");if(e&&t)return"[0-9+-.]*";if(e&&!t)return"[0-9+-]*";if(!e&&!t)return"[0-9]*"}return""},p.prototype._onSubmitted=function(t,e){this.attributes.onSubmitted&&(this.engine.sendMessage(JSON.stringify({type:"editable_text",message:{event:"onSubmitted",target:this.attributes.onSubmitted,data:e}})),t.blur())},p.prototype._onChanged=function(t,e){this.attributes.onChanged&&this.engine.sendMessage(JSON.stringify({type:"editable_text",message:{event:"onChanged",target:this.attributes.onChanged,data:e}}))},p);function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.contentElementType="",t}o.EditableText=i},{"../../env":42,"../component_view":27,"../dom_utils":29,"../utils":36}],11:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ForegroundDecoratedBox=void 0;var s,r=t("../component_view"),a=t("../dom_utils"),l=t("../utils"),i=(s=r.ComponentView,i(c,s),c.prototype.setChildren=function(t){s.prototype.setChildren.call(this,t),this.decorateElement.remove(),this.htmlElement.appendChild(this.decorateElement)},c.prototype.setAttributes=function(t){var e=this;s.prototype.setAttributes.call(this,t);var o,n,i,r={position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%"};if(t.color?r.backgroundColor=(0,l.cssColor)(t.color):r.backgroundColor="unset",t.image&&(r.backgroundImage='url("'+(t.image.src||(t.image.assetName?e.engine.debugger?t.image.assetPkg?"http://"+e.engine.debugger.serverAddr+"/assets/packages/"+t.image.assetPkg+"/"+t.image.assetName:"http://"+e.engine.debugger.serverAddr+"/assets/"+t.image.assetName:t.image.assetPkg?"assets/packages/"+t.image.assetPkg+"/"+t.assetName:"assets/"+t.image.assetName:void 0))+'")',"BoxFit.cover"===t.image.fit?r.backgroundSize="cover":r.backgroundSize="contain",r.backgroundRepeat="no-repeat"),null!==(e=t.decoration)&&void 0!==e&&e.gradient&&(r.backgroundImage?r.backgroundImage=(0,l.cssGradient)(t.decoration.gradient)+","+r.backgroundImage:r.background=(0,l.cssGradient)(t.decoration.gradient)),null!==(e=null===(e=t.decoration)||void 0===e?void 0:e.boxShadow)&&void 0!==e&&e[0]&&(o=null===(e=null===(o=t.decoration)||void 0===o?void 0:o.boxShadow)||void 0===e?void 0:e[0],r.boxShadow=(null===(e=(0,l.cssOffset)(o.offset))||void 0===e?void 0:e.dx)+"px "+(null===(e=(0,l.cssOffset)(o.offset))||void 0===e?void 0:e.dy)+"px "+o.blurRadius+"px "+o.spreadRadius+"px "+(0,l.cssColor)(o.color)),null!==(o=t.decoration)&&void 0!==o&&o.borderRadius)for(i in n=(0,l.cssBorderRadius)(t.decoration.borderRadius))r[i]=n[i];if(null!==(o=t.decoration)&&void 0!==o&&o.border)for(i in(n=(0,l.cssBorder)(t.decoration.border)).boxSizing="border-box",n)r[i]=n[i];(0,a.setDOMStyle)(this.decorateElement,r)},c);function c(){var t=null!==s&&s.apply(this,arguments)||this;return t.decorateElement=t.document.createElement("div"),t}o.ForegroundDecoratedBox=i},{"../component_view":27,"../dom_utils":29,"../utils":36}],12:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GestureDetector=void 0;var r,s=t("../../env"),a=t("../component_view"),l=t("../dom_utils"),i=(r=a.ComponentView,i(c,r),c.prototype.elementType=function(){return"div"},c.prototype.setChildren=function(t){var o=this;r.prototype.setChildren.call(this,t),this.subviews.forEach(function(t){var e;t.gestureViewConstraints={x:null!==(e=null===(e=o.constraints)||void 0===e?void 0:e.x)&&void 0!==e?e:0,y:null!==(e=null===(e=o.constraints)||void 0===e?void 0:e.y)&&void 0!==e?e:0},t.updateLayout()})},c.prototype.setAttributes=function(e){var o=this;r.prototype.setAttributes.call(this,e),this.didSetOnClicked||(this.didSetOnClicked=!0,this.htmlElement.onclick=function(t){o.engine.sendMessage(JSON.stringify({type:"gesture_detector",message:{event:"onTap",target:e.onTap}})),t&&t.stopPropagation()}),this.hoverOpacity=e.hoverOpacity,this.htmlElement.hoverOpacity=this.hoverOpacity,(0,l.setDOMAttribute)(this.htmlElement,"hoverOpacity",e.hoverOpacity)},c.prototype.findGestureDetectorElement=function(t){for(var e=0;e<t.length;e++){var o=t[e];if(o.isGestureDetector)return o}},c.prototype.setupGestureCatcher=function(){var e=this;s.MPEnv.platformType===s.PlatformType.browser&&(this.htmlElement.addEventListener("touchstart",function(t){c.activeTouchElement||((t=e.findGestureDetectorElement(t.composedPath())).hoverOpacity&&(c.activeTouchElement=t).classList.add("hoverOpacity"),e.attributes.onLongPress&&(e.longPressTimer=setTimeout(function(){e.longPressTimer&&(e.engine.sendMessage(JSON.stringify({type:"gesture_detector",message:{event:"onLongPress",target:e.attributes.onLongPress}})),e.longPressTimer=void 0)},300)))},!0),this.htmlElement.addEventListener("touchmove",function(){var t;null!==(t=c.activeTouchElement)&&void 0!==t&&t.classList.remove("hoverOpacity"),c.activeTouchElement=void 0,e.longPressTimer&&(clearTimeout(e.longPressTimer),e.longPressTimer=void 0)},!0),this.htmlElement.addEventListener("touchend",function(){var t;null!==(t=c.activeTouchElement)&&void 0!==t&&t.classList.remove("hoverOpacity"),c.activeTouchElement=void 0,e.longPressTimer&&(clearTimeout(e.longPressTimer),e.longPressTimer=void 0)},!0),this.htmlElement.addEventListener("touchcancel",function(){var t;null!==(t=c.activeTouchElement)&&void 0!==t&&t.classList.remove("hoverOpacity"),c.activeTouchElement=void 0,e.longPressTimer&&(clearTimeout(e.longPressTimer),e.longPressTimer=void 0)},!0))},c);function c(t){var e=r.call(this,t)||this;return e.document=t,e.classname="GestureDetector",e.hoverOpacity=!1,e.didSetOnClicked=!1,e.didSetOnLongPress=!1,e.htmlElement.isGestureDetector=!0,e.setupGestureCatcher(),e}o.GestureDetector=i},{"../../env":42,"../component_view":27,"../dom_utils":29}],13:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GridListLayout=void 0;var r,f=t("../utils"),t=t("./collection_view"),i=(r=t.CollectionViewLayout,i(s,r),s.prototype.prepareLayout=function(){this.isPlain?this.preparePlainLayout():this.prepareWaterfallLayout()},s.prototype.preparePlainLayout=function(){var i=this,r=(0<this.clientWidth?this.clientWidth:this.collectionView.viewWidth)-this.padding.right,s=(0<this.clientHeight?this.clientHeight:this.collectionView.viewHeight)-this.padding.bottom,a=[],l=this.padding.left,c=this.padding.top,u=0;this.items.forEach(function(t,e){var o,n=(0,f.cssSizeFromMPElement)(t),t=n.width,n=n.height;i.isHorizontalScroll?(o={x:l,y:c,width:t,height:n},c+=n+i.crossAxisSpacing,u=Math.max(l+t,u),.1<c+n-s&&(c=i.padding.top,e+1<i.items.length&&(l+=t+i.mainAxisSpacing))):(o={x:l,y:c,width:t,height:n},l+=t+i.crossAxisSpacing,u=Math.max(c+n,u),.1<l+t-r&&(l=i.padding.left,e+1<i.items.length&&(c+=n+i.mainAxisSpacing))),a.push(o)}),this.isHorizontalScroll?u+=this.padding.right:u+=this.padding.bottom,this.itemLayouts=a,this.maxVLength=u},s.prototype.prepareWaterfallLayout=function(){var c,u,p,d,h=this;this.crossAxisCount<=0?this.itemLayouts=[]:(u={},p=[],d=c=0,this.items.forEach(function(t,e){var o,n,i=(0,f.cssSizeFromMPElement)(t),r=i.width,s=i.height,a=h.isHorizontalScroll?h.padding.left:h.padding.top,l=c,t=l+1>=h.crossAxisCount?0:l+1;c=u[l]&&u[t]?(o=u[l],i=u[t],h.isHorizontalScroll?i.x+i.width<o.x+o.width?t:l:i.y+i.height<o.y+o.height?t:l):l,u[c]?(o=u[c],a=h.isHorizontalScroll?o.x+o.width:o.y+o.height,e>=h.crossAxisCount&&(a+=h.mainAxisSpacing)):a=h.isHorizontalScroll?h.padding.left:h.padding.top,d=h.isHorizontalScroll?(n={x:a,y:h.padding.top+s*c+c*h.crossAxisSpacing,width:r,height:s},u[c]=n,c=(c+1)%h.crossAxisCount,Math.max(a+r,d)):(n={x:h.padding.left+r*c+c*h.crossAxisSpacing,y:a,width:r,height:s},u[c]=n,c=(c+1)%h.crossAxisCount,Math.max(a+s,d)),p.push(n)}),this.isHorizontalScroll?d+=this.padding.right:d+=this.padding.bottom,this.itemLayouts=p,this.maxVLength=d)},s.prototype.collectionViewContentSize=function(){return this.isHorizontalScroll?{width:this.maxVLength,height:this.collectionView.viewHeight-this.padding.top-this.padding.bottom}:{width:this.collectionView.viewWidth-this.padding.left-this.padding.right,height:this.maxVLength}},s.prototype.layoutAttributesForItemAtIndex=function(t){return this.itemLayouts[t]},s);function s(){var t=null!==r&&r.apply(this,arguments)||this;return t.isPlain=!0,t.isHorizontalScroll=!1,t.padding={top:0,left:0,bottom:0,right:0},t.clientWidth=0,t.clientHeight=0,t.crossAxisCount=0,t.crossAxisSpacing=0,t.mainAxisSpacing=0,t.items=[],t.maxVLength=0,t.itemLayouts=[],t}o.GridListLayout=i},{"../utils":36,"./collection_view":5}],14:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GridView=void 0;var r,s=t("../utils"),a=t("./collection_view"),l=t("./grid_list_layout"),i=(r=a.CollectionView,i(c,r),c.prototype.setChildren=function(t){var e,o=this;r.prototype.setChildren.call(this,t),t&&(e=[],this.factory.fetchCachedChildren(t).forEach(function(t){e.push(t),o.factory.create(t,o.document)}),this.layout.items=e,this.listChildren=e,this.reloadLayouts())},c.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),this.layout.isHorizontalScroll="Axis.horizontal"===t.scrollDirection;var e,o=t.gridDelegate;o&&(this.layout.isPlain="SliverWaterfallDelegate"!==o.classname,this.layout.crossAxisCount=o.crossAxisCount,this.layout.mainAxisSpacing=o.mainAxisSpacing,this.layout.crossAxisSpacing=o.crossAxisSpacing),t.padding&&(e=(0,s.cssPadding)(this.attributes.padding),this.layout.padding.top=parseFloat(null!==(o=e.paddingTop)&&void 0!==o?o:"0.0"),this.layout.padding.left=parseFloat(null!==(o=e.paddingLeft)&&void 0!==o?o:"0.0"),this.layout.padding.bottom=parseFloat(null!==(o=e.paddingBottom)&&void 0!==o?o:"0.0"),this.layout.padding.right=parseFloat(null!==(e=e.paddingRight)&&void 0!==e?e:"0.0")),t.appBarPinned?this.setPinnedAppBar(t):this.appBarPinnedViews.length&&(this.appBarPinnedViews.forEach(function(t){return t.removeFromSuperview()}),this.appBarPinnedViews=[],this.appBarPersistentHeight=0),this.reloadLayouts()},c);function c(t){t=r.call(this,t)||this;return t.listChildren=[],t.layout=new l.GridListLayout(t),t}o.GridView=i},{"../utils":36,"./collection_view":5,"./grid_list_layout":13}],15:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.IgnorePointer=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),i=(r=s.ComponentView,i(l,r),l.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),(0,a.setDOMStyle)(this.htmlElement,{pointerEvents:"none"})},l);function l(){return null!==r&&r.apply(this,arguments)||this}o.IgnorePointer=i},{"../component_view":27,"../dom_utils":29}],16:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Image=void 0;var r,s=t("../../env"),a=t("../component_view"),l=t("../dom_utils"),i=(r=a.ComponentView,i(c,r),c.prototype.elementType=function(){return"img"},c.prototype.updateLayout=function(){var t,e,o;null!==(t=this.attributes)&&void 0!==t&&t.width&&null!==(e=this.attributes)&&void 0!==e&&e.height||null!==(e=this.constraints)&&void 0!==e&&e.w&&null!==(o=this.constraints)&&void 0!==o&&o.h?r.prototype.updateLayout.call(this):(0,l.setDOMStyle)(this.htmlElement,{position:null!==(o=null===(o=this.additionalConstraints)||void 0===o?void 0:o.position)&&void 0!==o?o:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"})},c.prototype.setAttributes=function(t){var e,o=this;r.prototype.setAttributes.call(this,t),(0,l.setDOMStyle)(this.htmlElement,{objectFit:function(){if(!t.fit)return"cover";switch(t.fit){case"BoxFit.fill":return"fill";case"BoxFit.contain":return"contain";case"BoxFit.cover":return"cover";case"BoxFit.fitWidth":case"BoxFit.fitHeight":return"scale-down";case"BoxFit.none":return"none";default:return"contain"}}()}),!t.fit||s.MPEnv.platformType!==s.PlatformType.wxMiniProgram&&s.MPEnv.platformType!==s.PlatformType.swanMiniProgram||(0,l.setDOMAttribute)(this.htmlElement,"mode",function(){if(!t.fit)return"cover";switch(t.fit){case"BoxFit.fill":return"scaleToFill";case"BoxFit.contain":return"aspectFit";case"BoxFit.cover":return"aspectFill";case"BoxFit.fitWidth":return"widthFix";case"BoxFit.fitHeight":return"heightFix";default:return"aspectFit"}}()),t.src?t.lazyLoad?s.MPEnv.platformType===s.PlatformType.browser?(this.htmlElement.classList.add("lazyload"),(0,l.setDOMAttribute)(this.htmlElement,"data-src",t.src),lazyload([this.htmlElement])):(s.MPEnv.platformType!==s.PlatformType.wxMiniProgram&&s.MPEnv.platformType!==s.PlatformType.swanMiniProgram||(0,l.setDOMAttribute)(this.htmlElement,"lazyLoad","true"),(0,l.setDOMAttribute)(this.htmlElement,"src",t.src)):(0,l.setDOMAttribute)(this.htmlElement,"src",t.src):t.assetName&&(this.engine.debugger?e=t.assetPkg?"http://"+o.engine.debugger.serverAddr+"/assets/packages/"+t.assetPkg+"/"+t.assetName:"http://"+o.engine.debugger.serverAddr+"/assets/"+t.assetName:(e=t.assetPkg?"assets/packages/"+t.assetPkg+"/"+t.assetName:"assets/"+t.assetName,s.MPEnv.platformType!==s.PlatformType.wxMiniProgram&&s.MPEnv.platformType!==s.PlatformType.swanMiniProgram||(e="/"+e)),(0,l.setDOMAttribute)(this.htmlElement,"src",e)),this.updateLayout()},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.Image=i},{"../../env":42,"../component_view":27,"../dom_utils":29}],17:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ListView=void 0;var r,s=t("../utils"),a=t("./collection_view"),l=t("./grid_list_layout"),i=(r=a.CollectionView,i(c,r),c.prototype.setChildren=function(t){var e,o=this;r.prototype.setChildren.call(this,t),t&&(e=[],this.factory.fetchCachedChildren(t).forEach(function(t){e.push(t),o.factory.create(t,o.document)}),this.layout.items=e,this.listChildren=e,this.reloadLayouts())},c.prototype.setAttributes=function(t){var e,o;r.prototype.setAttributes.call(this,t),this.layout.isHorizontalScroll="Axis.horizontal"===t.scrollDirection,t.padding&&(o=(0,s.cssPadding)(this.attributes.padding),this.layout.padding.top=parseFloat(null!==(e=o.paddingTop)&&void 0!==e?e:"0.0"),this.layout.padding.left=parseFloat(null!==(e=o.paddingLeft)&&void 0!==e?e:"0.0"),this.layout.padding.bottom=parseFloat(null!==(e=o.paddingBottom)&&void 0!==e?e:"0.0"),this.layout.padding.right=parseFloat(null!==(o=o.paddingRight)&&void 0!==o?o:"0.0")),t.appBarPinned?this.setPinnedAppBar(t):this.appBarPinnedViews.length&&(this.appBarPinnedViews.forEach(function(t){return t.removeFromSuperview()}),this.appBarPinnedViews=[],this.appBarPersistentHeight=0),this.reloadLayouts()},c);function c(t){t=r.call(this,t)||this;return t.listChildren=[],t.layout=new l.GridListLayout(t),t}o.ListView=i},{"../utils":36,"./collection_view":5,"./grid_list_layout":13}],18:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Offstage=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),i=(r=s.ComponentView,i(l,r),l.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),(0,a.setDOMStyle)(this.htmlElement,{display:t.offstage?"none":"unset"})},l);function l(){return null!==r&&r.apply(this,arguments)||this}o.Offstage=i},{"../component_view":27,"../dom_utils":29}],19:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.OpacityAncestor=o.Opacity=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),t=(r=s.ComponentView,i(l,r),l.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),(0,a.setDOMStyle)(this.htmlElement,{opacity:t.opacity.toString()})},l);function l(){return null!==r&&r.apply(this,arguments)||this}o.Opacity=t;var c,i=(c=s.AncestorView,i(u,c),u.prototype.setAttributes=function(t){c.prototype.setAttributes.call(this,t),this.target.ancestorStyle.opacity||(this.target.ancestorStyle.opacity=1),this.target.ancestorStyle.opacity*=t.opacity},u);function u(){return null!==c&&c.apply(this,arguments)||this}o.OpacityAncestor=i},{"../component_view":27,"../dom_utils":29}],20:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Overlay=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),i=(r=s.ComponentView,i(l,r),l.prototype.elementType=function(){return"div"},l.prototype.setAttributes=function(t){var e=this;r.prototype.setAttributes.call(this,t),t.onBackgroundTap?this.htmlElement.onclick=function(){e.engine.sendMessage(JSON.stringify({type:"overlay",message:{event:"onBackgroundTap",target:t.onBackgroundTap}}))}:this.htmlElement.onclick=null},l);function l(t){t=r.call(this,t)||this;return t.additionalConstraints={position:"fixed"},(0,a.setDOMStyle)(t.htmlElement,{position:"fixed",zIndex:"10000",left:"0px",top:"0px",right:"0px",bottom:"0px",touchAction:"none"}),t}o.Overlay=i},{"../component_view":27,"../dom_utils":29}],21:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function n(t){try{r(l.next(t))}catch(t){e(t)}}function i(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,i)}r((l=l.apply(t,s||[])).next())})},a=this&&this.__generator||function(o,n){var i,r,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(o,a)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.WidgetSpan=o.TextSpan=o.RichText=void 0;var r,l=t("../../env"),c=t("../component_view"),u=t("../dom_utils"),p=t("../utils"),t=(r=c.ComponentView,i(d,r),d.prototype.elementType=function(){return"div"},d.prototype.setConstraints=function(t){this.measuring||t&&(this.constraints=t,this.updateLayout(),(0,u.setDOMStyle)(this.htmlElement,{position:"absolute",opacity:"1"}))},d.prototype.setAttributes=function(t){var e;r.prototype.setAttributes.call(this,t),l.MPEnv.platformType!==l.PlatformType.wxMiniProgram&&l.MPEnv.platformType!==l.PlatformType.swanMiniProgram||this.htmlElement.setClass("mp_text");var o=t.maxWidth;this.maxWidth="string"==typeof o?parseFloat(o):void 0;o=t.maxHeight;this.maxHeight="string"==typeof o?parseFloat(o):void 0,l.MPEnv.platformType===l.PlatformType.wxMiniProgram||l.MPEnv.platformType===l.PlatformType.swanMiniProgram?(0,u.setDOMStyle)(this.htmlElement,{textAlign:(0,p.cssTextAlign)(t.textAlign),lineHeight:null===(e=t.height)||void 0===e?void 0:e.toString(),webkitLineClamp:t.maxLines?t.maxLines.toString():"99999"}):(0,u.setDOMStyle)(this.htmlElement,{overflow:"hidden",textOverflow:"ellipsis",textAlign:(0,p.cssTextAlign)(t.textAlign),display:"-webkit-box",fontSize:"11px",fontFamily:"sans-serif",lineHeight:null===(e=t.height)||void 0===e?void 0:e.toString(),overflowWrap:"anywhere",wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-line",webkitBoxOrient:"vertical",webkitLineClamp:t.maxLines?t.maxLines.toString():"99999"}),this.measureId=t.measureId},d.prototype.setSingleTextSpan=function(r){return s(this,void 0,void 0,function(){var e,o,n,i=this;return a(this,function(t){if(e={},r[0].attributes.style)for(n in o=(0,p.cssTextStyle)(r[0].attributes.style))e[n]=o[n];return r[0].attributes.text&&(this.htmlElement.innerText=r[0].attributes.text,l.MPEnv.platformType!==l.PlatformType.wxMiniProgram&&l.MPEnv.platformType!==l.PlatformType.swanMiniProgram||(0,u.setDOMAttribute)(this.htmlElement,"innerText",r[0].attributes.text)),r[0].attributes.onTap_el&&r[0].attributes.onTap_span&&(this.htmlElement.onclick=function(t){i.onClick(r[0].attributes.onTap_el,r[0].attributes.onTap_span),t&&t.stopPropagation()}),(0,u.setDOMStyle)(this.htmlElement,e),[2]})})},d.prototype.setChildren=function(e){var o;return s(this,void 0,void 0,function(){return a(this,function(t){return e&&1===e.length&&"text_span"===e[0].name&&null!==(o=e[0].attributes)&&void 0!==o&&o.text?this.setSingleTextSpan(e):r.prototype.setChildren.call(this,e),[2]})})},d.prototype.onClick=function(t,e){this.engine.sendMessage(JSON.stringify({type:"rich_text",message:{event:"onTap",target:t,subTarget:e}}))},d);function d(){var t=null!==r&&r.apply(this,arguments)||this;return t.measuring=!1,t}o.RichText=t;var h,t=(h=c.ComponentView,i(f,h),f.prototype.elementType=function(){return"div"},f.prototype.setChildren=function(t){t instanceof Array&&0<t.length&&h.prototype.setChildren.call(this,t)},f.prototype.setAttributes=function(t){var e=this;h.prototype.setAttributes.call(this,t);var o={position:"unset",display:"inline"};if(t.style){var n,i=(0,p.cssTextStyle)(t.style);for(n in i)o[n]=i[n]}t.text&&(this.htmlElement.innerText=t.text,l.MPEnv.platformType!==l.PlatformType.wxMiniProgram&&l.MPEnv.platformType!==l.PlatformType.swanMiniProgram||(0,u.setDOMAttribute)(this.htmlElement,"innerText",t.text)),t.onTap_el&&t.onTap_span&&(this.htmlElement.onclick=function(t){e.onClick(),t&&t.stopPropagation()}),(0,u.setDOMStyle)(this.htmlElement,o)},f.prototype.onClick=function(){this.attributes.onTap_el&&this.attributes.onTap_span&&this.engine.sendMessage(JSON.stringify({type:"rich_text",message:{event:"onTap",target:this.attributes.onTap_el,subTarget:this.attributes.onTap_span}}))},f);function f(){return null!==h&&h.apply(this,arguments)||this}o.TextSpan=t;var m,i=(m=c.ComponentView,i(v,m),v.prototype.elementType=function(){return"div"},v.prototype.setChildren=function(t){m.prototype.setChildren.call(this,t),this.subviews[0]&&(this.subviews[0].additionalConstraints={position:"relative"},(0,u.setDOMStyle)(this.subviews[0].htmlElement,{position:"relative",display:"inline-flex"}))},v.prototype.setAttributes=function(t){m.prototype.setAttributes.call(this,t),(0,u.setDOMStyle)(this.htmlElement,{display:"contents"})},v);function v(){return null!==m&&m.apply(this,arguments)||this}o.WidgetSpan=i},{"../../env":42,"../component_view":27,"../dom_utils":29,"../utils":36}],22:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.SliverPersistentHeader=void 0;var r,s=t("../../env"),a=t("../component_view"),l=t("../dom_utils"),i=(r=a.ComponentView,i(c,r),c.prototype.setAttributes=function(t){this.attributes=t,this.pinned=t.pinned,this.lazying=t.lazying,this.lazyOffset=t.lazyOffset,this.updateLayout(),this.observeScroller(),this.updateLazyState(0)},c.prototype.observeScroller=function(){var o=this;this.lazying&&!this.observingScroller&&(this.observingScroller=!0,s.MPEnv.platformType===s.PlatformType.browser?setTimeout(function(){var e;o.superview&&(e=function(t){o.htmlElement.isConnected||(o.observingScroller=!1,window.removeEventListener("scroll",e)),o.updateLazyState(window.scrollY)},window.addEventListener("scroll",e))},32):s.MPEnv.platformType!==s.PlatformType.wxMiniProgram&&s.MPEnv.platformType!==s.PlatformType.swanMiniProgram||this.document.window.on("scroll",function(t){o.updateLazyState(o.document.window.scrollY)}))},c.prototype.updateLazyState=function(t){this.lazying&&(0,l.setDOMStyle)(this.htmlElement,{opacity:t>this.lazyOffset?"1.0":"0.0"})},c.prototype.updateLayout=function(){var t,e,o,n,i;this.constraints&&(e=this.constraints.x,o=this.y,n=this.constraints.w,i=this.constraints.h,this.ancestors.forEach(function(t){t.constraints&&(e+=t.constraints.x,o+=t.constraints.y)}),(0,l.setDOMStyle)(this.htmlElement,{position:"sticky",left:null!==(t=null===(t=this.additionalConstraints)||void 0===t?void 0:t.left)&&void 0!==t?t:e+"px",top:this.pinned?this.h+"px":"unset",marginTop:this.pinned?o+"px":"unset",width:null!==(t=null===(t=this.additionalConstraints)||void 0===t?void 0:t.width)&&void 0!==t?t:n+"px",height:null!==(n=null===(n=this.additionalConstraints)||void 0===n?void 0:n.height)&&void 0!==n?n:i+"px",zIndex:"99"}))},c);function c(){var t=null!==r&&r.apply(this,arguments)||this;return t.pinned=!0,t.lazying=!1,t.observingScroller=!1,t.lazyOffset=0,t.y=0,t.h=0,t}o.SliverPersistentHeader=i},{"../../env":42,"../component_view":27,"../dom_utils":29}],23:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Transform=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),i=(r=s.ComponentView,i(l,r),l.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),(0,a.setDOMStyle)(this.htmlElement,{transform:t.transform})},l);function l(){return null!==r&&r.apply(this,arguments)||this}o.Transform=i},{"../component_view":27,"../dom_utils":29}],24:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Visibility=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),i=(r=s.ComponentView,i(l,r),l.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),(0,a.setDOMStyle)(this.htmlElement,{display:t.visible?"contents":"none"})},l);function l(){return null!==r&&r.apply(this,arguments)||this}o.Visibility=i},{"../component_view":27,"../dom_utils":29}],25:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.WebDialogs=void 0;var i=t("../../env"),t=(n.receivedWebDialogsMessage=function(t,e){i.MPEnv.platformType===i.PlatformType.wxMiniProgram||i.MPEnv.platformType===i.PlatformType.swanMiniProgram?this.wxMiniProgramReceivedWebDialogsMessage(t,e):this.browserMiniProgramReceivedWebDialogsMessage(t,e)},n.wxMiniProgramReceivedWebDialogsMessage=function(e,o){var t,n;"alert"===o.params.dialogType?i.MPEnv.platformScope.showModal({content:o.params.message,showCancel:!1,confirmText:"确定",success:function(){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id}}))}}):"confirm"===o.params.dialogType?i.MPEnv.platformScope.showModal({content:o.params.message,cancelText:"取消",confirmText:"确认",success:function(t){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:1==t.confirm}}))}}):"prompt"===o.params.dialogType?i.MPEnv.platformType===i.PlatformType.swanMiniProgram?i.MPEnv.platformScope.openReplyEditor({contentPlaceholder:o.params.message,content:null!==(n=o.params.defaultValue)&&void 0!==n?n:"",sendText:"确认",success:function(t){swan.closeReplyEditor(),"reply"===t.status?e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:t.content}})):e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:null}}))},fail:function(){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:null}}))}}):i.MPEnv.platformScope.showModal({title:o.params.message,content:null!==(t=o.params.defaultValue)&&void 0!==t?t:"",editable:!0,cancelText:"取消",confirmText:"确认",success:function(t){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:t.content}}))},fail:function(){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:null}}))}}):"actionSheet"===o.params.dialogType?i.MPEnv.platformScope.showActionSheet({itemList:o.params.items,success:function(t){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:t.tapIndex}}))},fail:function(){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:null}}))}}):"showToast"===o.params.dialogType?(n={},o.params.title&&(n.title=o.params.title),o.params.icon&&(n.icon=null===(t=o.params.icon)||void 0===t?void 0:t.replace("ToastIcon.","")),o.params.duration&&(n.duration=o.params.duration),o.params.mask&&(n.mask=o.params.mask),i.MPEnv.platformScope.showToast(n)):"hideToast"===o.params.dialogType&&i.MPEnv.platformScope.hideToast()},n.browserMiniProgramReceivedWebDialogsMessage=function(e,o){var t,n;"alert"===o.params.dialogType?(window.alert(o.params.message),e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id}}))):"confirm"===o.params.dialogType?(t=window.confirm(o.params.message),e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:t}}))):"prompt"===o.params.dialogType?(t=window.prompt(o.params.message,null!==(n=o.params.defaultValue)&&void 0!==n?n:""),e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:t}}))):"actionSheet"===o.params.dialogType?window.MPWebDialog.showActionSheet({itemList:o.params.items,success:function(t){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:t.tapIndex}}))},fail:function(){e.sendMessage(JSON.stringify({type:"action",message:{event:"callback",id:o.id,data:null}}))}}):"showToast"===o.params.dialogType?(n={},o.params.title&&(n.title=o.params.title),o.params.icon&&(n.icon=null===(t=o.params.icon)||void 0===t?void 0:t.replace("ToastIcon.","")),o.params.duration&&(n.duration=o.params.duration),o.params.mask&&(n.mask=o.params.mask),window.MPWebDialog.showToast(n)):"hideToast"===o.params.dialogType&&window.MPWebDialog.hideToast()},n);function n(){}o.WebDialogs=t},{"../../env":42}],26:[function(R,t,k){!function(A){!function(){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.ComponentFactory=void 0;var t=R("./basic/absorb_pointer"),e=R("./basic/clip_oval"),o=R("./basic/clip_r_rect"),n=R("./basic/colored_box"),i=R("./basic/decorated_box"),r=R("./basic/gesture_detector"),s=R("./basic/ignore_pointer"),a=R("./basic/offstage"),l=R("./basic/opacity"),c=R("./basic/transform"),u=R("./basic/image"),p=R("./component_view"),d=R("./mpkit/scaffold"),h=R("./basic/rich_text"),f=R("./basic/list_view"),m=R("./basic/grid_view"),v=R("./basic/custom_scroll_view"),y=R("./basic/custom_paint"),g=R("./mpkit/icon"),w=R("./mpkit/video_view"),b=R("./mpkit/web_view"),_=R("./mpkit/page_view"),P=R("./basic/overlay"),x=R("./basic/visibility"),S=R("./basic/sliver_persistent_header"),M=R("./basic/editable_text"),E=R("./mpkit/platform_view"),O=R("./basic/foreground_decorated_box"),C=R("./wechat_mini_program/wechat_miniprogram_button"),o=(T.prototype.create=function(t,e){if(t){var o=t["^"],n=t.name,i=t.hashCode;if(1==o&&"number"==typeof i)return this.cachedView[i];if(n&&i){o||(this.cachedElement[i]=t);o=!T.disableCache&&this.cachedView[i];if(o)return e=o.document,t.ancestors&&o.setAncestors(t.ancestors),t.constraints&&o.setConstraints(t.constraints),t.attributes&&o.setAttributes(t.attributes),t.children&&o.setChildren(this.fetchCachedChildren(t.children)),o;if(e){o=new(T.components[n]||p.ComponentView)(e);return null!==(e=null!==window&&void 0!==window?window:A)&&void 0!==e&&e.mpDEBUG&&o.htmlElement.setAttribute("mp-component",n),o.factory=this,o.engine=this.engine,o.hashCode=i,t.ancestors&&o.setAncestors(t.ancestors),t.constraints&&o.setConstraints(t.constraints),t.attributes&&o.setAttributes(t.attributes),t.children&&(T.disableCache?o.setChildren(t.children):o.setChildren(this.fetchCachedChildren(t.children))),T.disableCache||(this.cachedView[i]=o),o}}}},T.prototype.createAncestors=function(t,e){var o=t["^"],n=t.name,i=t.hashCode;if(1==o&&"number"==typeof i)return this.cachedAncestor[i];if(n&&i){o||(this.cachedElement[i]=t);var r=this.cachedAncestor[i];if(r)return!r.target||r.target===e||0<=(o=r.target.ancestors.indexOf(r))&&r.target.ancestors.splice(o,1),r.target=e,t.attributes&&r.setAttributes(t.attributes),t.constraints&&r.setConstraints(t.constraints),r;if(e){n=T.ancestors[n];if(n){e=new n(e);return t.attributes&&e.setAttributes(t.attributes),t.constraints&&e.setConstraints(t.constraints),this.cachedAncestor[i]=e}}}},T.prototype.fetchCachedChildren=function(t){var n=this;return t.map(function(t){var e=t["^"],o=t.hashCode;return e&&n.cachedElement[o]?n.cachedElement[o]:t})},T.prototype.callbackTextMeasureResult=function(t,e){var o=this;this.textMeasureResults.push({measureId:t,size:e}),this.markedNeedsFlushTextMeasureResult||(this.markedNeedsFlushTextMeasureResult=!0,setTimeout(function(){o.flushTextMeasureResult(),o.markedNeedsFlushTextMeasureResult=!1},50))},T.prototype.flushTextMeasureResult=function(){0<this.textMeasureResults.length&&(this.engine.sendMessage(JSON.stringify({type:"rich_text",message:{event:"onMeasured",data:this.textMeasureResults}})),this.textMeasureResults=[])},T.components={absorb_pointer:t.AbsorbPointer,clip_oval:e.ClipOval,clip_r_rect:o.ClipRRect,colored_box:n.ColoredBox,custom_paint:y.CustomPaint,custom_scroll_view:v.CustomScrollView,decorated_box:i.DecoratedBox,foreground_decorated_box:O.ForegroundDecoratedBox,editable_text:M.EditableText,gesture_detector:r.GestureDetector,grid_view:m.GridView,ignore_pointer:s.IgnorePointer,image:u.Image,list_view:f.ListView,offstage:a.Offstage,opacity:l.Opacity,overlay:P.Overlay,rich_text:h.RichText,text_span:h.TextSpan,widget_span:h.WidgetSpan,sliver_persistent_header:S.SliverPersistentHeader,transform:c.Transform,visibility:x.Visibility,mp_icon:g.MPIcon,mp_scaffold:d.MPScaffold,mp_video_view:w.MPVideoView,mp_web_view:b.MPWebView,mp_page_view:_.MPPageView,mp_platform_view:E.MPPlatformView,wechat_miniprogram_button:C.WechatMiniProgramButton},T.ancestors={opacity:l.OpacityAncestor,clip_r_rect:o.ClipRRectAncestor},T.disableCache=!1,T);function T(t){this.engine=t,this.cachedView={},this.cachedAncestor={},this.cachedElement={},this.textMeasureResults=[],this.markedNeedsFlushTextMeasureResult=!1}k.ComponentFactory=o}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./basic/absorb_pointer":2,"./basic/clip_oval":3,"./basic/clip_r_rect":4,"./basic/colored_box":6,"./basic/custom_paint":7,"./basic/custom_scroll_view":8,"./basic/decorated_box":9,"./basic/editable_text":10,"./basic/foreground_decorated_box":11,"./basic/gesture_detector":12,"./basic/grid_view":14,"./basic/ignore_pointer":15,"./basic/image":16,"./basic/list_view":17,"./basic/offstage":18,"./basic/opacity":19,"./basic/overlay":20,"./basic/rich_text":21,"./basic/sliver_persistent_header":22,"./basic/transform":23,"./basic/visibility":24,"./component_view":27,"./mpkit/icon":30,"./mpkit/page_view":31,"./mpkit/platform_view":32,"./mpkit/scaffold":33,"./mpkit/video_view":34,"./mpkit/web_view":35,"./wechat_mini_program/wechat_miniprogram_button":37}],27:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.AncestorView=o.ComponentView=void 0;var s=t("./dom_utils"),t=(n.prototype.elementType=function(){return"div"},n.prototype.setConstraints=function(t){t&&(this.constraints=t,this.updateLayout())},n.prototype.updateLayout=function(){var t,e,o,n,i,r;this.constraints&&(e=this.constraints.x,o=this.constraints.y,n=this.constraints.w,i=this.constraints.h,this.ancestors.forEach(function(t){t.constraints&&(e+=t.constraints.x,o+=t.constraints.y)}),r=this.additionalConstraints,this.collectionViewConstraints&&this.superview&&"CollectionView"===this.superview.classname&&(r=this.collectionViewConstraints),this.gestureViewConstraints&&this.superview&&"GestureDetector"===this.superview.classname&&(e-=this.gestureViewConstraints.x,o-=this.gestureViewConstraints.y),this.platformViewConstraints&&this.superview&&"PlatformView"===this.superview.classname&&(e-=this.platformViewConstraints.x,o-=this.platformViewConstraints.y),(0,s.setDOMStyle)(this.htmlElement,{position:null!==(t=null==r?void 0:r.position)&&void 0!==t?t:"absolute",left:null!==(t=null==r?void 0:r.left)&&void 0!==t?t:e+"px",top:null!==(t=null==r?void 0:r.top)&&void 0!==t?t:o+"px",width:null!==(t=null==r?void 0:r.width)&&void 0!==t?t:n+"px",height:null!==(r=null==r?void 0:r.height)&&void 0!==r?r:i+"px"}))},n.prototype.setAttributes=function(t){this.attributes=t},n.prototype.setChildren=function(t){var o=this;if(t instanceof Array){var e=t.map(function(t){return o.factory.create(t,o.document)}).filter(function(t){return t}),t=!1,n=-1;if(e.length!==this.subviews.length){for(var t=!0,i=0;i<e.length;i++)if(e[i]!==this.subviews[i]){n=i;break}}else e.every(function(t,e){return t===o.subviews[e]&&t.superview===o})||(t=!0);if(t)if(0<n){for(var r=[],i=n;i<this.subviews.length;i++)r.push(this.subviews[i]);r.forEach(function(t){return t.removeFromSuperview()});for(i=n;i<e.length;i++)this.addSubview(e[i])}else this.removeAllSubviews(),e.forEach(function(t){return o.addSubview(t)})}},n.prototype.resetAncestorStyle=function(){this.ancestorStyle.opacity&&(this.ancestorStyle.opacity=1),this.ancestorStyle.borderRadius&&(this.ancestorStyle.borderRadius="unset"),this.ancestorStyle.overflow&&(this.ancestorStyle.overflow="unset"),this.ancestorStyle.borderTopLeftRadius&&(this.ancestorStyle.borderTopLeftRadius="unset"),this.ancestorStyle.borderTopRightRadius&&(this.ancestorStyle.borderTopRightRadius="unset"),this.ancestorStyle.borderBottomLeftRadius&&(this.ancestorStyle.borderBottomLeftRadius="unset"),this.ancestorStyle.borderBottomRightRadius&&(this.ancestorStyle.borderBottomRightRadius="unset")},n.prototype.setAncestors=function(t){var e=this;!(t instanceof Array)&&0<this.ancestors.length?(this.resetAncestorStyle(),this.ancestors=[]):(this.resetAncestorStyle(),this.ancestors=t.map(function(t){return e.factory.createAncestors(t,e)}).filter(function(t){return t})),(0,s.setDOMStyle)(this.htmlElement,this.ancestorStyle)},n.prototype.removeAllSubviews=function(){this.subviews.forEach(function(t){t.superview=void 0,t.htmlElement.remove()}),this.subviews=[]},n.prototype.removeFromSuperview=function(){var t,e;this.superview&&(0<=(e=this.superview.subviews.indexOf(this))&&null!==(t=this.superview)&&void 0!==t&&t.subviews.splice(e,1),this.htmlElement.remove())},n.prototype.addSubview=function(t){t.superview&&t.removeFromSuperview(),this.subviews.push(t),(t.superview=this).htmlElement.appendChild(t.htmlElement),t.didMoveToWindow()},n.prototype.didMoveToWindow=function(){this.subviews.forEach(function(t){return t.didMoveToWindow()})},n);function n(t){this.document=t,this.classname="",this.subviews=[],this.ancestors=[],this.ancestorStyle={},this.htmlElement=t.createElement(this.elementType())}o.ComponentView=t;i.prototype.setConstraints=function(t){t&&(this.constraints=t,this.target.updateLayout())},i.prototype.setAttributes=function(t){},t=i;function i(t){this.target=t}o.AncestorView=t},{"./dom_utils":29}],28:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.wrapDartObject=void 0;s.wrapDartObject=function(t){return null==t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t?t:t instanceof Array?t.map(function(t){return(0,s.wrapDartObject)(t)}):(t.o&&(t=t.o),new Proxy(t,{get:function(t,e){var o,n,i,r,e=null!==(r=null!==(i=null!==(n=null!==(o=null===(o=null===(o=null==t?void 0:t.b)||void 0===o?void 0:o[e])||void 0===o?void 0:o.b)&&void 0!==o?o:null===(n=null===(n=null==t?void 0:t.c)||void 0===n?void 0:n[e])||void 0===n?void 0:n.b)&&void 0!==n?n:null===(i=null===(i=null==t?void 0:t._nums)||void 0===i?void 0:i[e])||void 0===i?void 0:i.hashMapCellValue)&&void 0!==i?i:null===(r=null===(r=null==t?void 0:t._strings)||void 0===r?void 0:r[e])||void 0===r?void 0:r.hashMapCellValue)&&void 0!==r?r:t[e];return(0,s.wrapDartObject)(e)}}))}},{}],29:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.setDOMAttribute=o.setDOMStyle=void 0;o.setDOMStyle=function(t,e){if(0!==Object.keys(e).length){for(var o in e){var n=e[o];"string"==typeof n&&0<n.indexOf(".0px")&&(e[o]=n.replace(".0px","px"))}if("function"==typeof HTMLElement&&t instanceof HTMLElement)for(var o in e)t.style[o]=e[o];else t.setStyle(e)}};o.setDOMAttribute=function(t,e,o){void 0===t.attributes&&(t.attributes={}),t.attributes[e]!==o&&(void 0===(t.attributes[e]=o)?t.removeAttribute(e):t.setAttribute(e,o))}},{}],30:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MPIcon=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),l=t("../utils"),i=(r=s.ComponentView,i(c,r),c.prototype.setChildren=function(){},c.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),(0,a.setDOMStyle)(this.htmlElement,{backgroundColor:(0,l.cssColor)(t.color),mask:"url("+t.iconUrl+") no-repeat center",webkitMask:"url("+t.iconUrl+") no-repeat center",width:"24px",height:"24px",transform:"scale("+t.size/24+", "+t.size/24+")",transformOrigin:"top left"})},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.MPIcon=i},{"../component_view":27,"../dom_utils":29,"../utils":36}],31:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MPPageView=void 0;var r,s=t("../../env"),a=t("../component_view"),l=t("../dom_utils"),t=(r=a.ComponentView,i(c,r),c.prototype.setChildren=function(t){r.prototype.setChildren.call(this,t),this.htmlElement.className="swiper-container",this.htmlElement.id="d_"+this.hashCode,this.subviews.forEach(function(t){t.htmlElement.className="swiper-slide",t.htmlElement.style.position="relative"}),this.setupSwiperInstance()},c.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),this.direction="Axis.vertical"===t.scrollDirection?"vertical":"horizontal",this.loop=t.loop,this.wrapperHtmlElement.style.flexDirection="Axis.vertical"===t.scrollDirection?"column":"row",this.setupSwiperInstance()},c.prototype.setupSwiperInstance=function(){var t=this;setTimeout(function(){t.swiperInstance?(t.swiperInstance.changeDirection(t.direction),t.swiperInstance.update()):t.swiperInstance=new window.Swiper("#d_"+t.hashCode,{direction:t.direction,loop:t.loop})},16)},c.prototype.addSubview=function(t){t.superview&&t.removeFromSuperview(),this.subviews.push(t),(t.superview=this).wrapperHtmlElement.appendChild(t.htmlElement),t.didMoveToWindow()},c);function c(t){t=r.call(this,t)||this;return t.wrapperHtmlElement=t.document.createElement("div"),t.direction="horizontal",t.loop=!1,t.wrapperHtmlElement.className="swiper-wrapper",t.htmlElement.appendChild(t.wrapperHtmlElement),t}var u,i=(u=a.ComponentView,i(p,u),p.prototype.elementType=function(){return"swiper"},p.prototype.setAttributes=function(t){u.prototype.setAttributes.call(this,t),(0,l.setDOMAttribute)(this.htmlElement,"vertical","Axis.vertical"===t.scrollDirection),(0,l.setDOMAttribute)(this.htmlElement,"circular",!!t.loop)},p);function p(){return null!==u&&u.apply(this,arguments)||this}o.MPPageView=s.MPEnv.platformType===s.PlatformType.wxMiniProgram||s.MPEnv.platformType===s.PlatformType.swanMiniProgram?i:t},{"../../env":42,"../component_view":27,"../dom_utils":29}],32:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MPPlatformView=void 0;var r,t=t("../component_view"),i=(r=t.ComponentView,i(s,r),s.handleInvokeMethodCallback=function(t,e){this._invokeMethodCompleter[t]&&(this._invokeMethodCompleter[t](e),delete this._invokeMethodCompleter[t])},s.prototype.elementType=function(){return"div"},s.prototype.setChildren=function(t){var o=this;r.prototype.setChildren.call(this,t),this.subviews.forEach(function(t){var e;t.platformViewConstraints={x:null!==(e=null===(e=o.constraints)||void 0===e?void 0:e.x)&&void 0!==e?e:0,y:null!==(e=null===(e=o.constraints)||void 0===e?void 0:e.y)&&void 0!==e?e:0},t.updateLayout()})},s.prototype.onMethodCall=function(t,e){},s.prototype.invokeMethod=function(t,e,o){var n=this.hashCode+"_"+Math.random();if(this.engine.sendMessage(JSON.stringify({type:"platform_view",message:{event:"methodCall",hashCode:this.hashCode,method:t,params:e,seqId:n,requireResult:o}})),o)return new Promise(function(t){s._invokeMethodCompleter[n]=t})},s._invokeMethodCompleter={},s);function s(){var t=null!==r&&r.apply(this,arguments)||this;return t.classname="PlatformView",t}o.MPPlatformView=i},{"../component_view":27}],33:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MPScaffold=void 0;var r,s=t("../component_view"),a=t("../dom_utils"),l=t("../utils"),i=(r=s.ComponentView,i(c,r),c.prototype.setAppBar=function(t){this.appBar===t&&!0!==(null===t||void 0===t?void 0:t.collectionViewFixed)||(this.removeAllSubviews(),(this.appBar=t)&&((t.collectionViewFixed=!1,a.setDOMStyle)(t.htmlElement,{pointerEvents:"unset",display:"unset"}),t.subviews.forEach(function(t){(0,a.setDOMStyle)(t.htmlElement,{position:"absolute",marginTop:"0px"})})),t&&this.engine.pageMode&&(t.additionalConstraints={position:"fixed"},(0,a.setDOMStyle)(t.htmlElement,{position:"fixed",zIndex:"9999"})),this.readdSubviews())},c.prototype.setBody=function(t){this.body!==t&&(this.removeAllSubviews(),this.body=t,this.readdSubviews())},c.prototype.setBottomBar=function(t,e,o){this.bottomBar!==t&&(this.removeAllSubviews(),(this.bottomBar=t)&&this.engine.pageMode&&(t.additionalConstraints={position:"fixed",top:"unset"},(0,a.setDOMStyle)(t.htmlElement,{position:"fixed",top:"unset",bottom:"0px",zIndex:"9999",paddingBottom:!0===e?"env(safe-area-inset-bottom)":"",backgroundColor:o?(0,l.cssColor)(o):void 0})),this.readdSubviews())},c.prototype.setFloatingBody=function(t){this.floatingBody!==t&&(this.removeAllSubviews(),(this.floatingBody=t)&&this.engine.pageMode&&(t.additionalConstraints={position:"fixed",zIndex:"9999"},(0,a.setDOMStyle)(t.htmlElement,{position:"fixed"})),this.readdSubviews())},c.prototype.readdSubviews=function(){this.body&&this.addSubview(this.body),this.appBar&&this.addSubview(this.appBar),this.bottomBar&&this.addSubview(this.bottomBar),this.floatingBody&&this.addSubview(this.floatingBody)},c.prototype.setAttributes=function(t){var e,o,n;r.prototype.setAttributes.call(this,t),this.setAppBar(t.appBar?this.factory.create(t.appBar,this.document):void 0),this.setBody(t.body?this.factory.create(t.body,this.document):void 0),this.setBottomBar(t.bottomBar?this.factory.create(t.bottomBar,this.document):void 0,t.bottomBarWithSafeArea,t.bottomBarSafeAreaColor),this.setFloatingBody(t.floatingBody?this.factory.create(t.floatingBody,this.document):void 0),t.name?null!==(e=this.delegate)&&void 0!==e&&e.setPageTitle(t.name):null!==(e=this.delegate)&&void 0!==e&&e.setPageTitle(""),this.delegate?t.backgroundColor?null!==(o=this.delegate)&&void 0!==o&&o.setPageBackgroundColor((0,l.cssColorHex)(t.backgroundColor)):null!==(o=this.delegate)&&void 0!==o&&o.setPageBackgroundColor("transparent"):(0,a.setDOMStyle)(this.htmlElement,{backgroundColor:t.backgroundColor?(0,l.cssColor)(t.backgroundColor):"unset"}),t.appBarColor&&null!==(n=this.delegate)&&void 0!==n&&n.setAppBarColor((0,l.cssColorHex)(t.appBarColor),t.appBarTintColor?(0,l.cssColorHex)(t.appBarTintColor):"#000000")},c.prototype.setDelegate=function(t){this.delegate=t},c.prototype.onRefresh=function(){var e=this;return new Promise(function(t){e.refreshEndResolver=t,e.engine.sendMessage(JSON.stringify({type:"scaffold",message:{event:"onRefresh",target:e.hashCode}}))})},c.prototype.onWechatMiniProgramShareAppMessage=function(){var e=this;return new Promise(function(t){e.onWechatMiniProgramShareAppMessageResolver=t,e.engine.sendMessage(JSON.stringify({type:"scaffold",message:{event:"onWechatMiniProgramShareAppMessage",target:e.hashCode}}))})},c.prototype.onReachBottom=function(){this.engine.sendMessage(JSON.stringify({type:"scaffold",message:{event:"onReachBottom",target:this.hashCode}}))},c.prototype.setChildren=function(){},c);function c(){var t=null!==r&&r.apply(this,arguments)||this;return t.attached=!1,t}o.MPScaffold=i},{"../component_view":27,"../dom_utils":29,"../utils":36}],34:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MPVideoView=void 0;var r,s=t("../dom_utils"),t=t("./platform_view"),i=(r=t.MPPlatformView,i(a,r),a.prototype.elementType=function(){return"video"},a.prototype.onMethodCall=function(t,e){var o;"play"===t?this.htmlElement.play():"pause"===t?this.htmlElement.pause():"setVolumn"===t?(this.htmlElement.muted=!1,this.htmlElement.volume=e.volumn):"volumnUp"===t?(this.htmlElement.muted=!1,o=this.htmlElement.volume,this.htmlElement.volume=o+.1):"volumnDown"===t?(this.htmlElement.muted=!1,o=this.htmlElement.volume,this.htmlElement.volume=o-.1):"setMuted"===t?this.htmlElement.muted=e.muted:"fullscreen"===t?this.htmlElement.requestFullscreen():"setPlaybackRate"===t?this.htmlElement.playbackRate=e.playbackRate:"seekTo"===t&&(this.htmlElement.currentTime=e.seekTo)},a.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),(0,s.setDOMAttribute)(this.htmlElement,"src",t.url),t.controls&&(0,s.setDOMAttribute)(this.htmlElement,"controls",t.controls),t.autoplay&&(0,s.setDOMAttribute)(this.htmlElement,"autoplay",t.autoplay),t.loop&&(0,s.setDOMAttribute)(this.htmlElement,"loop",t.loop),t.muted&&(0,s.setDOMAttribute)(this.htmlElement,"muted",t.muted),t.poster&&(0,s.setDOMAttribute)(this.htmlElement,"poster",t.poster)},a.prototype.setChildren=function(){},a);function a(){return null!==r&&r.apply(this,arguments)||this}o.MPVideoView=i},{"../dom_utils":29,"./platform_view":32}],35:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.MPWebView=void 0;var r,s=t("../dom_utils"),t=t("./platform_view"),i=(r=t.MPPlatformView,i(a,r),a.prototype.elementType=function(){return"iframe"},a.prototype.onMethodCall=function(t,e){"reload"===t?((0,s.setDOMAttribute)(this.htmlElement,"src",""),(0,s.setDOMAttribute)(this.htmlElement,"src",this.attributes.url)):"loadUrl"===t&&null!=e&&e.url&&((0,s.setDOMAttribute)(this.htmlElement,"src",""),(0,s.setDOMAttribute)(this.htmlElement,"src",e.url))},a.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),(0,s.setDOMAttribute)(this.htmlElement,"src",t.url),(0,s.setDOMStyle)(this.htmlElement,{border:"none"})},a.prototype.setChildren=function(){},a);function a(){return null!==r&&r.apply(this,arguments)||this}o.MPWebView=i},{"../dom_utils":29,"./platform_view":32}],36:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cssSizeFromMPElement=n.cssPadding=n.cssTextStyle=n.cssTextAlign=n.cssBorder=n.cssOffset=n.cssGradient=n.cssBorderRadius=n.cssColorHex=n.cssColor=void 0;n.cssColor=function(t){var e=parseInt(t),o=(e>>16&255).toString(16);o.length<2&&(o="0"+o);var n=(e>>8&255).toString(16);n.length<2&&(n="0"+n);var i=(e>>0&255).toString(16);i.length<2&&(i="0"+i);t=(e>>24&255).toString(16);return"ff"===t?"#"+o+n+i:(t.length<2&&(t="0"+t),"rgba("+(e>>16&255)+","+(e>>8&255)+","+(e>>0&255)+","+(e>>24&255)/255+")")};n.cssColorHex=function(t){var e=parseInt(t),o=(e>>16&255).toString(16);o.length<2&&(o="0"+o);t=(e>>8&255).toString(16);t.length<2&&(t="0"+t);e=(e>>0&255).toString(16);return"#"+o+t+(e=e.length<2?"0"+e:e)};n.cssBorderRadius=function(t){var e,o;return 0!==t.indexOf("BorderRadius.circular(")?0!==t.indexOf("BorderRadius.all(")?0!==t.indexOf("BorderRadius.only(")?{}:{borderTopLeftRadius:(null!==(e=null===(e=(o=t.replace("BorderRadius.only(","").replace(/\)/gi,"").replace(/Radius.circular\(/gi,"")).match(/topLeft: ([0-9|.]+)/))||void 0===e?void 0:e[1])&&void 0!==e?e:0)+"px",borderTopRightRadius:(null!==(e=null===(e=o.match(/topRight: ([0-9|.]+)/))||void 0===e?void 0:e[1])&&void 0!==e?e:0)+"px",borderBottomLeftRadius:(null!==(e=null===(e=o.match(/bottomLeft: ([0-9|.]+)/))||void 0===e?void 0:e[1])&&void 0!==e?e:0)+"px",borderBottomRightRadius:(null!==(e=null===(e=o.match(/bottomRight: ([0-9|.]+)/))||void 0===e?void 0:e[1])&&void 0!==e?e:0)+"px"}:{borderRadius:(o=t.replace("BorderRadius.all(","").replace(")",""))+"px"}:{borderRadius:(o=t.replace("BorderRadius.circular(","").replace(")",""))+"px"}};n.cssGradient=function(o){if(!o)return"";if("LinearGradient"!==o.classname)return"";return"linear-gradient("+function(){switch(o.end){case"centerRight":return"to right";case"centerLeft":return"to left";case"topRight":return"to top right";case"bottomRight":return"to bottom right";case"topLeft":return"to top left";case"bottomLeft":return"to bottom left";case"topCenter":return"to top";case"bottomCenter":return"to bottom"}}()+", "+(o.stops&&o.stops.length?o.colors.map(function(t,e){return void 0!==o.stops[e]?(0,n.cssColor)(t)+" "+(100*o.stops[e]).toFixed(0)+"%":(0,n.cssColor)(t)}):o.colors.map(function(t){return(0,n.cssColor)(t)})).join(", ")+")"};n.cssOffset=function(t){if(0===t.indexOf("Offset(")){t=t.replace("Offset(","").replace(")","").split(",").map(function(t){return t.trim()});return{dx:t[0],dy:t[1]}}};n.cssBorder=function(t){var e={};return"BorderStyle.none"!==t.topStyle&&(e.borderTopWidth=0===t.topWidth?(1/window.devicePixelRatio).toFixed(2)+"px":t.topWidth+"px",e.borderTopColor=(0,n.cssColor)(t.topColor),e.borderTopStyle="solid"),"BorderStyle.none"!==t.leftStyle&&(e.borderLeftWidth=0===t.leftWidth?(1/window.devicePixelRatio).toFixed(2)+"px":t.leftWidth+"px",e.borderLeftColor=(0,n.cssColor)(t.leftColor),e.borderLeftStyle="solid"),"BorderStyle.none"!==t.bottomStyle&&(e.borderBottomWidth=0===t.bottomWidth?(1/window.devicePixelRatio).toFixed(2)+"px":t.bottomWidth+"px",e.borderBottomColor=(0,n.cssColor)(t.bottomColor),e.borderBottomStyle="solid"),"BorderStyle.none"!==t.rightStyle&&(e.borderRightWidth=0===t.rightWidth?(1/window.devicePixelRatio).toFixed(2)+"px":t.rightWidth+"px",e.borderRightColor=(0,n.cssColor)(t.rightColor),e.borderRightStyle="solid"),e};n.cssTextAlign=function(t){return null==t?void 0:t.replace("TextAlign.","")},n.cssTextStyle=function(t){var e,o={userSelect:"none",WebkitUserSelect:"none"};return null!=t&&(t.fontFamily&&(o.fontFamily=t.fontFamily),null!=t.fontSize&&(o.fontSize=(null!==(e=t.fontSize)&&void 0!==e?e:14).toString()+"px"),null!=t.color&&(o.color=(0,n.cssColor)(t.color)),t.fontWeight&&(o.fontWeight=function(t){if(t.fontWeight)return t.fontWeight.replace("FontWeight.w","")}(t)),t.fontStyle&&(o.fontStyle=function(t){if("FontStyle.italic"===t.fontStyle)return"italic"}(t)),t.letterSpacing&&(o.letterSpacing=t.letterSpacing),t.wordSpacing&&(o.wordSpacing=t.wordSpacing),t.textBaseline&&(o.alignmentBaseline="TextBaseline.alphabetic"===(e=t).textBaseline?"alphabetic":"TextBaseline.ideographic"===e.textBaseline?"ideographic":void 0),t.height&&(o.lineHeight=t.height),null!=t.backgroundColor&&(o.backgroundColor=(0,n.cssColor)(t.backgroundColor)),t.decoration&&("TextDecoration.lineThrough"===t.decoration?o.textDecoration="line-through":"TextDecoration.underline"===t.decoration&&(o.textDecoration="underline"))),o};n.cssPadding=function(t){if(!t)return{};if(0===t.indexOf("EdgeInsets.zero"))return{};if(0===t.indexOf("EdgeInsets.all("))return{paddingLeft:(e=t.replace("EdgeInsets.all(","").replace(")",""))+"px",paddingTop:e+"px",paddingRight:e+"px",paddingBottom:e+"px"};if(0!==t.indexOf("EdgeInsets("))return{};var e=(e=t.replace("EdgeInsets(","").replace(")","")).split(",").map(function(t){return t.trim()});return{paddingLeft:e[0]+"px",paddingTop:e[1]+"px",paddingRight:e[2]+"px",paddingBottom:e[3]+"px"}};n.cssSizeFromMPElement=function(t){if(!t)return{width:0,height:0};var e=0,o=0;if(t.constraints&&"number"==typeof t.constraints.w&&"number"==typeof t.constraints.h&&0<t.constraints.w&&0<t.constraints.h)e=t.constraints.w,o=t.constraints.h;else if(t.children instanceof Array&&1===t.children.length)return(0,n.cssSizeFromMPElement)(t.children[0]);return{width:e,height:o}}},{}],37:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.WechatMiniProgramButton=void 0;var r,s=t("../dom_utils"),t=t("../mpkit/platform_view"),i=(r=t.MPPlatformView,i(a,r),a.prototype.elementType=function(){return"button"},a.prototype.setAttributes=function(t){r.prototype.setAttributes.call(this,t),(0,s.setDOMAttribute)(this.htmlElement,"openType",t.openType),(0,s.setDOMAttribute)(this.htmlElement,"appParameter",t.appParameter)},a);function a(){return null!==r&&r.apply(this,arguments)||this}o.WechatMiniProgramButton=i},{"../dom_utils":29,"../mpkit/platform_view":32}],38:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.BrowserDebugger=void 0;var n=(i.prototype.start=function(){var e=this,t="ws";"https:"===new URL(location.href).protocol&&(t="wss"),this.socket=new WebSocket(t+"://"+this.serverAddr+"/ws"),this.socket.onopen=function(){e.needReload?location.href="?":(e.socketDidConnect(),e.connected=!0)},this.socket.onmessage=function(t){"string"==typeof t.data&&e.socketDidReceiveMessage(t.data)},this.socket.onclose=function(){e.needReload=!0,e.socketDidDisconnect()}},i.prototype.socketDidConnect=function(){var o=this;this.messageQueue.forEach(function(t){var e;null!==(e=o.socket)&&void 0!==e&&e.send(t)}),this.messageQueue=[]},i.prototype.socketDidDisconnect=function(){var t=this;setTimeout(function(){t.start()},1e3)},i.prototype.socketDidReceiveMessage=function(t){this.engine.didReceivedMessage(t)},i.prototype.sendMessage=function(t){this.socket&&1==this.socket.readyState?this.socket.send(t):this.messageQueue.push(t)},i);function i(t,e){this.serverAddr=t,this.engine=e,this.messageQueue=[],this.connected=!1,this.needReload=!1}o.BrowserDebugger=n},{}],39:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.createDebugger=void 0;var n=t("../env"),i=t("./browser_debugger"),r=t("./wx_debugger");o.createDebugger=function(t,e){return new(n.MPEnv.platformType===n.PlatformType.wxMiniProgram||n.MPEnv.platformType===n.PlatformType.swanMiniProgram?r.WXDebugger:i.BrowserDebugger)(t,e)}},{"../env":42,"./browser_debugger":38,"./wx_debugger":40}],40:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.WXDebugger=void 0;var n=t("../env"),t=(i.prototype.start=function(){var e=this;this.socket=n.MPEnv.platformScope.connectSocket({url:"ws://"+this.serverAddr+"/ws"}),this.socket.onOpen(function(){e.connected=!0,e.socketDidConnect()}),this.socket.onMessage(function(t){"string"==typeof t.data&&e.socketDidReceiveMessage(t.data)}),this.socket.onClose(function(){e.connected&&(e.engine.componentFactory.cachedElement={},e.engine.componentFactory.cachedView={},n.MPEnv.platformScope.reLaunch({url:function(){try{n.MPEnv.platformScope.getLaunchOptionsSync().path,e.encodePathParams(n.MPEnv.platformScope.getLaunchOptionsSync().query)}catch(t){return"/pages/index/index"}}()})),e.connected=!1,e.socketDidDisconnect()})},i.prototype.encodePathParams=function(t){var e=[];if(t)for(var o in t)e.push(o+"="+encodeURIComponent(t[o]));return e.join("&")},i.prototype.socketDidConnect=function(){var o=this;this.messageQueue.forEach(function(t){var e;null!==(e=o.socket)&&void 0!==e&&e.send({data:t})}),this.messageQueue=[]},i.prototype.socketDidDisconnect=function(){var t=this;setTimeout(function(){t.start()},1e3)},i.prototype.socketDidReceiveMessage=function(t){this.engine.didReceivedMessage(t)},i.prototype.sendMessage=function(t){this.socket&&this.connected?this.socket.send({data:t}):this.messageQueue.push(t)},i);function i(t,e){this.serverAddr=t,this.engine=e,this.messageQueue=[],this.connected=!1}o.WXDebugger=t},{"../env":42}],41:[function(require,module,exports){!function(global){!function(){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function n(t){try{r(l.next(t))}catch(t){e(t)}}function i(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,i)}r((l=l.apply(t,s||[])).next())})},__generator=this&&this.__generator||function(o,n){var i,r,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(o,a)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},_a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Engine=void 0;var custom_paint_1=require("./components/basic/custom_paint"),web_dialogs_1=require("./components/basic/web_dialogs"),component_factory_1=require("./components/component_factory"),platform_view_1=require("./components/mpkit/platform_view"),debugger_1=require("./debugger/debugger"),env_1=require("./env"),method_channel_handler_1=require("./mpjs/method_channel_handler"),mpjs_1=require("./mpjs/mpjs"),text_measurer_1=require("./text_measurer"),window_info_1=require("./window_info"),dart_object_1=require("./components/dart_object");try{var self_1=null!==window&&void 0!==window?window:global;self_1.mpDEBUG=null!==(_a=self_1.mpDEBUG)&&void 0!==_a&&_a}catch(error){}var Engine=function(){function Engine(){this.started=!1,this.messageQueue=[],this.managedViews={},this.unmanagedViewFrameData={},this.mpJS=new mpjs_1.MPJS(this),this.windowInfo=new window_info_1.WindowInfo(this),this.pageMode=!1,this.componentFactory=new component_factory_1.ComponentFactory(this),this.drawable=new custom_paint_1.MPDrawable(this),method_channel_handler_1.MethodChannelHandler.installHandler()}return Engine.codeBlockWithCodePath=function(codePath){return new Promise(function(res,rej){var httpRequest=new XMLHttpRequest;httpRequest.onload=function(){res(function(){eval(httpRequest.response)})},httpRequest.onerror=function(t){rej(t)},httpRequest.open("GET",codePath),httpRequest.send()})},Engine.codeBlockWithFile=function(t){return function(){require(t).main()}},Engine.registerPlatformView=function(t,e){component_factory_1.ComponentFactory.components[t]=e},Engine.prototype.initWithDebuggerServerAddr=function(t){this.debugger=(0,debugger_1.createDebugger)(t,this)},Engine.prototype.initWithCodeBlock=function(t){this.codeBlock=t},Engine.prototype.start=function(){var e=this;this.started||(this.codeBlock||this.debugger)&&(this.windowInfo.updateWindowInfo(),this.listenViewport(),self?self.engineScope=this.mpJS.engineScope:(global.self=__assign(__assign({},global),{JSON:JSON,setTimeout:setTimeout,setInterval:setInterval,clearTimeout:function(t){clearTimeout(t)},clearInterval:function(t){clearInterval(t)},wx:"undefined"!=typeof wx?wx:void 0,swan:"undefined"!=typeof swan?swan:void 0,engineScope:this.mpJS.engineScope,Object:Object}),"undefined"!=typeof wx&&(global.wx=wx),"undefined"!=typeof swan&&(global.swan=swan),global.engineScope=this.mpJS.engineScope,global.Object=Object,global.JSON=JSON),this.debugger&&this.debugger.start(),this.codeBlock&&(this.mpJS.engineScope.onMessage=function(t){e.didReceivedMessage(t)},this.mpJS.engineScope.onMapMessage=function(t){e.didReceivedMessage(t,!0)},e.codeBlock(),this.flushQueueMessage()),this.started=!0)},Engine.prototype.sendMessage=function(t){var e;null!==(e=null!==window&&void 0!==window?window:global)&&void 0!==e&&e.mpDEBUG&&console.log((new Date).getTime(),"out",JSON.parse(t)),this.debugger?this.debugger.sendMessage(t):this.mpJS.engineScope.postMessage?this.mpJS.engineScope.postMessage(t):this.messageQueue.push(t)},Engine.prototype.flushQueueMessage=function(){var e=this;this.debugger||this.mpJS.engineScope.postMessage&&this.messageQueue.forEach(function(t){e.mpJS.engineScope.postMessage(t)})},Engine.prototype.didReceivedMessage=function(t,e){var o,e=(e=void 0===e?!1:e)?(0,dart_object_1.wrapDartObject)(t):JSON.parse(t);e&&(null!==(t=null!==window&&void 0!==window?window:global)&&void 0!==t&&t.mpDEBUG&&console.log((new Date).getTime(),"in",e),"frame_data"===e.type?this.didReceivedFrameData(e.message):"diff_data"===e.type?this.didReceivedDiffData(e.message):"element_gc"===e.type?e.message instanceof Array&&this.didReceivedElementGC(e.message):"decode_drawable"===e.type?this.drawable.decodeDrawable(e.message):"route"===e.type?null!==(o=null!==(o=null===(o=this.app)||void 0===o?void 0:o.router)&&void 0!==o?o:this.router)&&void 0!==o&&o.didReceivedRouteData(e.message):"mpjs"===e.type?this.didReceivedMPJS(e):"action:web_dialogs"===e.type?web_dialogs_1.WebDialogs.receivedWebDialogsMessage(this,e.message):"scaffold"===e.type?this.didReceivedScaffold(e.message):"rich_text"===e.type&&"doMeasure"===(null===(o=e.message)||void 0===o?void 0:o.event)?text_measurer_1.TextMeasurer.didReceivedDoMeasureData(this,e.message):"platform_view"===e.type&&this.didReceivedPlatformView(e.message))},Engine.prototype.didReceivedFrameData=function(t){var e;if(t){var o=t.routeId;if(void 0===this.managedViews[o])return this.unmanagedViewFrameData[o]||(this.unmanagedViewFrameData[o]=[]),void this.unmanagedViewFrameData[o].push(t);"number"==typeof o&&null!==(e=this.managedViews[o])&&void 0!==e&&e.didReceivedFrameData(t)}},Engine.prototype.didReceivedDiffData=function(t){var e=this;t&&t.diffs.forEach(function(t){e.componentFactory.create(t,void 0),e.componentFactory.createAncestors(t,void 0)})},Engine.prototype.didReceivedElementGC=function(t){var e=this;t.forEach(function(t){delete e.componentFactory.cachedElement[t],delete e.componentFactory.cachedView[t]})},Engine.prototype.didReceivedScaffold=function(t){var e,o;"onRefreshEnd"===t.event?(o=this.componentFactory.cachedView[t.target])&&(null!==(e=o.refreshEndResolver)&&void 0!==e&&e.call(o,void 0),o.refreshEndResolver=void 0):"onWechatMiniProgramShareAppMessageResolve"===t.event&&(o=this.componentFactory.cachedView[t.target])&&(null!==(e=o.onWechatMiniProgramShareAppMessageResolver)&&void 0!==e&&e.call(o,t.params),o.onWechatMiniProgramShareAppMessageResolver=void 0)},Engine.prototype.didReceivedMPJS=function(e){var o=this;this.mpJS.handleMessage(e.message,function(t){o.sendMessage(JSON.stringify({type:"mpjs",message:{requestId:e.message.requestId,result:t}}))},function(t,e){o.sendMessage(JSON.stringify({type:"mpjs",message:{funcId:t,arguments:e}}))})},Engine.prototype.didReceivedPlatformView=function(n){return __awaiter(this,void 0,void 0,function(){var e,o;return __generator(this,function(t){switch(t.label){case 0:return"methodCall"!==n.event?[3,3]:(e=this.componentFactory.cachedView[n.hashCode])?[4,e.onMethodCall(n.method,n.params)]:[3,2];case 1:e=t.sent(),n.requireResult&&this.sendMessage(JSON.stringify({type:"platform_view",message:{event:"methodCallCallback",seqId:n.seqId,result:e}})),t.label=2;case 2:return[3,4];case 3:"methodCallCallback"===n.event&&"string"==typeof(o=n.seqId)&&platform_view_1.MPPlatformView.handleInvokeMethodCallback(o,n.result),t.label=4;case 4:return[2]}})})},Engine.prototype.listenViewport=function(){var t=this;env_1.MPEnv.platformType===env_1.PlatformType.browser&&window.addEventListener("resize",function(){t.sendViewportChangeEvent()})},Engine.prototype.sendViewportChangeEvent=function(){var e=this;this.sendViewportHandler&&clearTimeout(this.sendViewportHandler),this.sendViewportHandler=setTimeout(function(){var t;e.windowInfo.updateWindowInfo(),null!==(t=null===(t=e.app)||void 0===t?void 0:t.router)&&void 0!==t&&t.history.forEach(function(t){t.item.viewportChanged()}),e.sendViewportHandler=void 0},32)},Engine}();exports.Engine=Engine}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./components/basic/custom_paint":7,"./components/basic/web_dialogs":25,"./components/component_factory":26,"./components/dart_object":28,"./components/mpkit/platform_view":32,"./debugger/debugger":39,"./env":42,"./mpjs/method_channel_handler":44,"./mpjs/mpjs":45,"./text_measurer":48,"./window_info":49}],42:[function(t,e,o){"use strict";var n,i;Object.defineProperty(o,"__esModule",{value:!0}),o.MPEnv=o.PlatformType=void 0,(i=n=o.PlatformType||(o.PlatformType={}))[i.unknown=0]="unknown",i[i.browser=1]="browser",i[i.wxMiniProgram=2]="wxMiniProgram",i[i.swanMiniProgram=3]="swanMiniProgram",o.MPEnv={platformType:"undefined"!=typeof wx&&"function"==typeof wx.getSystemInfoSync?n.wxMiniProgram:"undefined"!=typeof swan&&"function"==typeof swan.getSystemInfoSync?n.swanMiniProgram:n.browser,platformScope:"undefined"!=typeof wx&&"function"==typeof wx.getSystemInfoSync?wx:"undefined"!=typeof swan&&"function"==typeof swan.getSystemInfoSync?swan:void 0}},{}],43:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.setDOMStyle=o.setDOMAttribute=o.MPPlatformView=o.WXApp=o.BrowserApp=o.WXPage=o.Page=o.Engine=void 0;var n=t("./engine");Object.defineProperty(o,"Engine",{enumerable:!0,get:function(){return n.Engine}});var i=t("./page");Object.defineProperty(o,"Page",{enumerable:!0,get:function(){return i.Page}}),Object.defineProperty(o,"WXPage",{enumerable:!0,get:function(){return i.WXPage}});var r=t("./app");Object.defineProperty(o,"BrowserApp",{enumerable:!0,get:function(){return r.BrowserApp}}),Object.defineProperty(o,"WXApp",{enumerable:!0,get:function(){return r.WXApp}});var s=t("./components/mpkit/platform_view");Object.defineProperty(o,"MPPlatformView",{enumerable:!0,get:function(){return s.MPPlatformView}});var a=t("./components/dom_utils");Object.defineProperty(o,"setDOMAttribute",{enumerable:!0,get:function(){return a.setDOMAttribute}}),Object.defineProperty(o,"setDOMStyle",{enumerable:!0,get:function(){return a.setDOMStyle}})},{"./app":1,"./components/dom_utils":29,"./components/mpkit/platform_view":32,"./engine":41,"./page":46}],44:[function(t,e,i){!function(n){!function(){"use strict";var t=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function n(t){try{r(l.next(t))}catch(t){e(t)}}function i(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,i)}r((l=l.apply(t,s||[])).next())})},a=this&&this.__generator||function(o,n){var i,r,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(o,a)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(i,"__esModule",{value:!0}),i.MethodChannelHandler=void 0;var l=null!==window&&void 0!==window?window:n,e=(o.installHandler=function(){l.mp_core_methodChannelHandlerWebOnly=this.handler},o.handler=function(o,n,i,r,s){return t(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:if(!Object.prototype.hasOwnProperty.call(l,o))return r("NOTIMPLEMENTED"),[2];if("function"!=typeof l[o][n])return r("NOTIMPLEMENTED"),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,l[o][n](i,s)];case 2:return e=t.sent(),r(JSON.stringify(e)),[3,4];case 3:return e=t.sent(),r("ERROR:"+e),[3,4];case 4:return[2]}})})},o);function o(){}i.MethodChannelHandler=e}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(t,e,n){!function(o){!function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MPJS=void 0;var r=null!==window&&void 0!==window?window:o,t=(e.prototype.handleMessage=function(t,e,o){"callMethod"===t.event?this.callMethod(t,e,o):"getValue"===t.event?this.getValue(t,e):"setValue"===t.event?this.setValue(t,e):"hasProperty"===t.event?this.hasProperty(t,e):"deleteProperty"===t.event&&this.deleteProperty(t,e)},e.prototype.callMethod=function(t,e,o){var n,i=this,r=t.params,t=this.getCallee(r.objectHandler,r.callChain);if("object"==typeof t||"function"==typeof t)try{var s=t[r.method].apply(t,null===(n=r.args)||void 0===n?void 0:n.map(function(t){return i.wrapArgument(t,o)}));e(this.wrapResult(s))}catch(t){console.error(t)}},e.prototype.getValue=function(t,e){var o=t.params,t=this.getCallee(o.objectHandler,o.callChain);e(this.wrapResult(t[o.key]))},e.prototype.setValue=function(t,e){t=t.params;this.getCallee(t.objectHandler,t.callChain)[t.key]=t.value,e(void 0)},e.prototype.hasProperty=function(t,e){var o=t.params,t=this.getCallee(o.objectHandler,o.callChain);e(this.wrapResult(t&&t.hasOwnProperty(o.key)))},e.prototype.deleteProperty=function(t,e){var o=t.params,t=this.getCallee(o.objectHandler,o.callChain);t&&delete t[o.key],e(1)},e.prototype.getCallee=function(t,e){var o=null!==(t=this.objectRefs[t])&&void 0!==t?t:r;"engineScope"===e[0]&&(o=this.engineScope,e.shift());for(var n=0;n<e.length;n++){var i=e[n],o=o[i];if(null==(o="document"===i&&0===n&&void 0===o?null===(i=null===(i=null===(i=this.engine)||void 0===i?void 0:i.managedViews)||void 0===i?void 0:i[0])||void 0===i?void 0:i.document:o))break}return o},e.prototype.wrapArgument=function(t,o){var e=this;if("string"==typeof t&&0===t.indexOf("func:")){var n=t,i=this;return function(){for(var t=[],e=0;e<arguments.length;e++)t.push(i.wrapResult(arguments[e]));o(n,t)}}if("string"==typeof t&&0===t.indexOf("obj:"))return this.objectRefs[t.replace("obj:","")];if("object"==typeof t&&t instanceof Array)return t.map(function(t){return e.wrapArgument(t,o)});if("object"!=typeof t)return t;var r,s={};for(r in t)s[r]=this.wrapArgument(t[r],o);return s},e.prototype.wrapResult=function(t){if("string"==typeof t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;var e=Math.random().toString();return this.objectRefs[e]=t,{objectHandler:e}},e);function e(t){this.engine=t,this.engineScope={},this.objectRefs={}}n.MPJS=t}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(y,t,g){!function(v){!function(){"use strict";var l=this&&this.__assign||function(){return(l=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},t=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function n(t){try{r(l.next(t))}catch(t){e(t)}}function i(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,i)}r((l=l.apply(t,s||[])).next())})},r=this&&this.__generator||function(o,n){var i,r,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(o,a)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(g,"__esModule",{value:!0}),g.WXPage=g.WXPageScaffoldDelegate=g.BrowserPageScaffoldDelegate=g.Page=void 0;var o=y("./components/dom_utils"),n=y("./components/mpkit/scaffold"),i=y("./env"),c=y("./router"),u=y("./text_measurer"),p=e(y("eventemitter3")),d=(s.prototype.ready=function(){return t(this,void 0,void 0,function(){var e=this;return r(this,function(t){return[2,new Promise(function(t){e.readyCallback=t})]})})},s.prototype.requestRoute=function(){var n,i;return t(this,void 0,void 0,function(){var e,o;return r(this,function(t){switch(t.label){case 0:return this.engine.app||(this.engine.router=new c.Router(this.engine)),e=null!==(n=null===(n=this.engine.app)||void 0===n?void 0:n.router)&&void 0!==n?n:null===(i=this.engine)||void 0===i?void 0:i.router,[4,this.fetchViewport()];case 1:return o=t.sent(),[2,e.requestRoute(null!==(i=null===(i=this.options)||void 0===i?void 0:i.route)&&void 0!==i?i:"/",null===(i=this.options)||void 0===i?void 0:i.params,this.isFirst||void 0===this.engine.app,{width:o.width,height:o.height})]}})})},s.prototype.fetchViewport=function(){return t(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:return[4,this.element.getBoundingClientRect()];case 1:return(e=t.sent()).height<=.1&&(i.MPEnv.platformType===i.PlatformType.wxMiniProgram||i.MPEnv.platformType===i.PlatformType.swanMiniProgram?e.height=i.MPEnv.platformScope.getSystemInfoSync().windowHeight:e.height=window.innerHeight),[2,e]}})})},s.prototype.dispose=function(){delete this.engine.managedViews[this.viewId]},s.prototype.viewportChanged=function(){var n;return t(this,void 0,void 0,function(){var e,o;return r(this,function(t){switch(t.label){case 0:return(e=null!==(n=null===(n=this.engine.app)||void 0===n?void 0:n.router)&&void 0!==n?n:null===(n=this.engine)||void 0===n?void 0:n.router)?[4,this.fetchViewport()]:[3,2];case 1:o=t.sent(),e.updateRoute(this.viewId,{width:o.width,height:o.height}),t.label=2;case 2:return[2]}})})},s.prototype.didReceivedFrameData=function(t){if(!0!==t.ignoreScaffold){var e=this.engine.componentFactory.create(t.scaffold,this.document);if(!(e instanceof n.MPScaffold))return;this.scaffoldView!==e&&(this.scaffoldView&&(this.scaffoldView.htmlElement.remove(),this.scaffoldView.removeFromSuperview()),(this.scaffoldView=e)instanceof n.MPScaffold&&!e.delegate&&(i.MPEnv.platformType===i.PlatformType.wxMiniProgram||i.MPEnv.platformType===i.PlatformType.swanMiniProgram?e.setDelegate(new f(this.document)):e.setDelegate(new a(this.document)),e.setAttributes(t.scaffold.attributes))),this.scaffoldView&&this.active&&!this.scaffoldView.attached&&(this.scaffoldView.attached=!0,this.element.appendChild(this.scaffoldView.htmlElement),(0,o.setDOMStyle)(this.scaffoldView.htmlElement,{display:"contents"}))}t.overlays&&t.overlays instanceof Array&&this.setOverlays(t.overlays)},s.prototype.onRefresh=function(){return t(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return this.scaffoldView instanceof n.MPScaffold?[4,this.scaffoldView.onRefresh()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},s.prototype.onWechatMiniProgramShareAppMessage=function(){return t(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return this.scaffoldView instanceof n.MPScaffold?[4,this.scaffoldView.onWechatMiniProgramShareAppMessage()]:[3,2];case 1:return[2,t.sent()];case 2:return[2]}})})},s.prototype.onReachBottom=function(){this.scaffoldView instanceof n.MPScaffold&&this.scaffoldView.onReachBottom()},s.prototype.onPageScroll=function(t){},s.prototype.setOverlays=function(t){var o=this,n=t.map(function(t){return o.engine.componentFactory.create(t,o.document)}).filter(function(t){return t});n.length===this.overlaysView.length&&n.every(function(t,e){return n[e]===o.overlaysView[e]})||(this.overlaysView.forEach(function(t){t.htmlElement.remove(),t.removeFromSuperview()}),n.forEach(function(t){o.document.body.appendChild(t.htmlElement)}),this.overlaysView=n)},Object.defineProperty(s.prototype,"active",{get:function(){return this._active},set:function(t){(this._active=t)?null!==(t=this.scaffoldView)&&void 0!==t&&t.htmlElement&&(this.element.appendChild(this.scaffoldView.htmlElement),this.scaffoldView.setAttributes(this.scaffoldView.attributes)):this.scaffoldView&&(this.scaffoldView.attached=!1,this.scaffoldView.htmlElement.remove())},enumerable:!1,configurable:!0}),s);function s(t,e,o,n){var i=this;void 0===n&&(n=null===self||void 0===self?void 0:self.document),this.element=t,this.engine=e,this.options=o,this.document=n,this._active=!0,this.viewId=-1,this.overlaysView=[],this.isFirst=!1,this.requestRoute().then(function(t){i.viewId=t,e.managedViews[i.viewId]=i,e.pageMode=!0,e.unmanagedViewFrameData[i.viewId]&&(e.unmanagedViewFrameData[i.viewId].forEach(function(t){i.didReceivedFrameData(t)}),delete e.unmanagedViewFrameData[i.viewId]),null!==(t=i.readyCallback)&&void 0!==t&&t.call(i,void 0)})}g.Page=d;var a=(h.prototype.setPageTitle=function(t){this.document.title=t},h.prototype.setPageBackgroundColor=function(t){this.document.body.style.backgroundColor=t},h.prototype.setAppBarColor=function(t,e){},h);function h(t){this.document=t}g.BrowserPageScaffoldDelegate=a;var f=(m.prototype.setPageTitle=function(t){i.MPEnv.platformScope.setNavigationBarTitle({title:t})},m.prototype.setPageBackgroundColor=function(t){if("transparent"===t)return this.backgroundElement.remove(),void(this.backgroundElementAttached=!1);(0,o.setDOMStyle)(this.backgroundElement,{position:"fixed",width:"100vw",height:"100vh",zIndex:"-1",backgroundColor:t}),this.backgroundElementAttached||(this.document.body.appendChild(this.backgroundElement),this.backgroundElementAttached=!0,i.MPEnv.platformScope.setBackgroundColor({backgroundColor:t}))},m.prototype.setAppBarColor=function(t,e){i.MPEnv.platformScope.setNavigationBarColor({backgroundColor:t,frontColor:e})},m);function m(t){this.document=t,this.backgroundElement=this.document.createElement("div"),this.backgroundElementAttached=!1}g.WXPageScaffoldDelegate=f;g.WXPage=function(r,s,a){return void 0===s&&(s="#vdom"),void 0===a&&(a=v.app),{onLoad:function(t){var e=this.selectComponent(s).miniDom.document;(this.document=e).window=new p.default;var o=this.selectComponent(s+"_tm").miniDom.document;u.TextMeasurer.activeTextMeasureDocument=o,c.Router.beingPush=!1;var n,i=((n=a.indexPage.split("/")).pop(),n.join("/")),o=r;r&&!t.route||(delete(n=l({},t)).route,t.route?o={route:t.route,params:n}:"/index"===(o={route:this.route.replace(i,""),params:n}).route&&(o.route="/")),null!=o&&o.route&&(o.route=decodeURIComponent(o.route)),this.mpPage=new d(e.body,a.engine,o,e),this.mpPage.isFirst=1===getCurrentPages().length},onUnload:function(){this.mpPage.viewId&&a.router.disposeRoute(this.mpPage.viewId)},onShow:function(){u.TextMeasurer.activeTextMeasureDocument=this.selectComponent(s+"_tm").miniDom.document},onPullDownRefresh:function(){this.mpPage.onRefresh().then(function(t){i.MPEnv.platformScope.stopPullDownRefresh()})},onShareAppMessage:function(){return{promise:this.mpPage.onWechatMiniProgramShareAppMessage()}},onReachBottom:function(){this.mpPage.onReachBottom()},onPageScroll:function(t){this.mpPage.onPageScroll(t.scrollTop),this.document.window.scrollY=t.scrollTop,this.document.window.emit("scroll",t.scrollTop)}}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./components/dom_utils":29,"./components/mpkit/scaffold":33,"./env":42,"./router":47,"./text_measurer":48,eventemitter3:50}],47:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function n(t){try{r(l.next(t))}catch(t){e(t)}}function i(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,i)}r((l=l.apply(t,s||[])).next())})},c=this&&this.__generator||function(o,n){var i,r,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(o,a)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.WXRouter=o.BrowserRouter=o.Router=void 0;var r=t("./app"),s=t("./env"),a=t("./page"),u=(p.prototype.updateRoute=function(e,o){return l(this,void 0,void 0,function(){return c(this,function(t){return this.engine.sendMessage(JSON.stringify({type:"router",message:{event:"updateRoute",routeId:e,viewport:o}})),[2]})})},p.prototype.requestRoute=function(i,r,s,a){return l(this,void 0,void 0,function(){var e,o,n=this;return c(this,function(t){return this.thePushingRouteId?(e=this.thePushingRouteId,this.thePushingRouteId=void 0,this.engine.sendMessage(JSON.stringify({type:"router",message:{event:"updateRoute",routeId:e,viewport:a}})),[2,e]):(o=Math.random().toString(),[2,new Promise(function(t){n.routeResponseHandler[o]=t,n.engine.sendMessage(JSON.stringify({type:"router",message:{event:"requestRoute",requestId:o,name:i,params:null!=r?r:{},viewport:a,root:!0===s}}))})])})})},p.prototype.responseRoute=function(t){var e=t.requestId,t=t.routeId;null!==(e=this.routeResponseHandler[e])&&void 0!==e&&e.call(this,t)},p.prototype.disposeRoute=function(t){this.engine.sendMessage(JSON.stringify({type:"router",message:{event:"disposeRoute",routeId:t}}))},p.prototype.didReceivedRouteData=function(t){var e=t.event;"responseRoute"===e?this.responseRoute(t):"didPush"===e?this.didPush(t):"didReplace"===e?this.didReplace(t):"didPop"===e&&this.didPop()},p.prototype.didPush=function(t){throw"native implementation"},p.prototype.didReplace=function(t){throw"native implementation"},p.prototype.didPop=function(){throw"native implementation"},p.beingPush=!1,p);function p(t){this.engine=t,this.routeResponseHandler={}}o.Router=u;var d,t=(i(h,d=u),h.prototype.encodePath=function(t,e){var o=[];if(e)for(var n in e)o.push(n+"="+encodeURIComponent(e[n]));if(this.isPathRewriteEnabled)return 0<o.length?t+"?"+o.join("&"):""+t;var i=0<=t.indexOf("?")?t.split("?")[0]:t,t=0<=t.indexOf("?")?t.substr(t.indexOf("?")):"";return 0<o.length?"?route="+encodeURI(i)+encodeURIComponent(t)+"&"+o.join("&"):"?route="+encodeURI(i)+encodeURIComponent(t)},h.prototype.didSetupFirst=function(t,e,o){window.history.replaceState({routeId:t},"",this.encodePath(e,o))},h.prototype.didPush=function(t){var e=t.routeId;this.thePushingRouteId=e;var o=t.name;window.history.pushState({routeId:e},"",this.encodePath(o,t.params));o=window.pageYOffset,t=new a.Page(this.engine.app.rootElement,this.engine);this.pushHistory(t,o)},h.prototype.didReplace=function(t){var e=t.routeId;this.thePushingRouteId=e;var o=t.name;window.history.replaceState({routeId:e},"",this.encodePath(o,t.params));t=new a.Page(this.engine.app.rootElement,this.engine);this.replaceHistory(t)},h.prototype.didPop=function(){var t=this;this.doBacking=!0,window.history.back(),this.popHistory(),setTimeout(function(){t.doBacking=!1},100)},h.prototype.pushHistory=function(t,e){this.history.forEach(function(t){return t.item.active=!1}),this.history.push({item:t,scrollPosition:e}),window.scrollTo(0,0)},h.prototype.replaceHistory=function(t){this.history.forEach(function(t){return t.item.active=!1}),this.history[this.history.length-1]={item:t,scrollPosition:0},window.scrollTo(0,0)},h.prototype.popHistory=function(){this.history.length<=1||(this.history.pop().item.active=!1,this.history[this.history.length-1].item.active=!0,window.scrollTo(0,this.history[this.history.length-1].scrollPosition))},h);function h(t){var o=d.call(this,t)||this;return o.history=[],o.isPathRewriteEnabled=!1,o.doBacking=!1,window.addEventListener("popstate",function(t){return!!o.doBacking||void(window.history.state&&window.history.state.routeId&&(e=window.history.state.routeId,1<o.history.length?(o.popHistory(),o.engine.sendMessage(JSON.stringify({type:"router",message:{event:"popToRoute",routeId:e}}))):o.engine.app&&o.engine.app instanceof r.BrowserApp&&o.engine.app.setupFirstPage(void 0,!0)));var e}),o}o.BrowserRouter=t;var f,i=(i(m,f=u),m.prototype.encodeRelativePath=function(t,e){var o=[];if(e)for(var n in e)o.push(n+"="+encodeURIComponent(e[n]));return 0<o.length?(0===t.indexOf("/")?t.substr(1):t)+"?"+o.join("&"):""+(0===t.indexOf("/")?t.substr(1):t)},m.prototype.encodeIndexPath=function(t,e){var o=[];if(e)for(var n in e)o.push(n+"="+encodeURIComponent(e[n]));var i=0<=t.indexOf("?")?t.split("?")[0]:t,t=0<=t.indexOf("?")?t.substr(t.indexOf("?")):"";return 0<o.length?"/"+this.engine.app.indexPage+"?route="+encodeURI(i)+encodeURIComponent(t)+"&"+o.join("&"):"/"+this.engine.app.indexPage+"?route="+encodeURI(i)+encodeURIComponent(t)},m.prototype.didPush=function(t){var e=this;u.beingPush=!0;var o=t.routeId;this.thePushingRouteId=o;var n=t.name;s.MPEnv.platformScope.navigateTo({url:this.encodeRelativePath(n,t.params),fail:function(){s.MPEnv.platformScope.navigateTo({url:e.encodeIndexPath(n,t.params)})}}),setTimeout(function(){u.beingPush=!1},1e3)},m.prototype.didReplace=function(t){var e=this,o=t.routeId;this.thePushingRouteId=o;var n=t.name;s.MPEnv.platformScope.redirectTo({url:this.encodeRelativePath(n,t.params),fail:function(){s.MPEnv.platformScope.redirectTo({url:e.encodeIndexPath(n,t.params)})}})},m.prototype.didPop=function(){s.MPEnv.platformScope.navigateBack()},m);function m(){return null!==f&&f.apply(this,arguments)||this}o.WXRouter=i},{"./app":1,"./env":42,"./page":46}],48:[function(t,e,o){"use strict";var s=this&&this.__awaiter||function(t,s,a,l){return new(a=a||Promise)(function(o,e){function n(t){try{r(l.next(t))}catch(t){e(t)}}function i(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,i)}r((l=l.apply(t,s||[])).next())})},a=this&&this.__generator||function(o,n){var i,r,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(o,a)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.TextMeasurer=void 0;var r=t("./components/component_factory"),l=t("./components/dom_utils"),c=t("./env"),u=t("./router"),t=(n.delay=function(){return s(this,void 0,void 0,function(){return a(this,function(t){return[2,new Promise(function(t){setTimeout(function(){t(null)},32)})]})})},n.didReceivedDoMeasureData=function(n,i){return s(this,void 0,void 0,function(){var e,o=this;return a(this,function(t){switch(t.label){case 0:this.activeTextMeasureDocument||(this.activeTextMeasureDocument=document),t.label=1;case 1:return u.Router.beingPush?[4,this.delay()]:[3,3];case 2:return t.sent(),[3,1];case 3:return i.items?(r.ComponentFactory.disableCache=!0,e=i.items,e=e.map(function(t){return n.componentFactory.create(t,o.activeTextMeasureDocument)}).filter(function(t){return t}),r.ComponentFactory.disableCache=!1,[4,Promise.all(e.map(function(r){return s(o,void 0,void 0,function(){var e,o,n,i;return a(this,function(t){switch(t.label){case 0:return c.MPEnv.platformType!==c.PlatformType.wxMiniProgram&&c.MPEnv.platformType!==c.PlatformType.swanMiniProgram||r.htmlElement.setClass("mp_text"),(0,l.setDOMStyle)(r.htmlElement,{position:"fixed",top:"0px",left:"0px",opacity:"0",width:"unset",maxWidth:null!==(e=r.attributes)&&void 0!==e&&e.maxWidth&&"Infinity"!==(null===(e=r.attributes)||void 0===e?void 0:e.maxWidth)?(null===(o=r.attributes)||void 0===o?void 0:o.maxWidth)+"px":"999999px",height:"unset",maxHeight:null!==(o=r.attributes)&&void 0!==o&&o.maxHeight&&"Infinity"!==(null===(i=r.attributes)||void 0===i?void 0:i.maxHeight)?(null===(n=r.attributes)||void 0===n?void 0:n.maxHeight)+"px":"999999px"}),this.activeTextMeasureDocument.body.appendChild(r.htmlElement),c.MPEnv.platformType!==c.PlatformType.wxMiniProgram&&c.MPEnv.platformType!==c.PlatformType.swanMiniProgram?[3,3]:[4,this.activeTextMeasureDocument.awaitSetState()];case 1:return t.sent(),[4,this.delay()];case 2:t.sent(),t.label=3;case 3:return[4,r.htmlElement.getBoundingClientRect()];case 4:return i=t.sent(),r.htmlElement.remove(),[2,{measureId:r.attributes.measureId,width:null!==(n=null==i?void 0:i.width)&&void 0!==n?n:0,height:null!==(i=null==i?void 0:i.height)&&void 0!==i?i:0}]}})})}))]):[3,5];case 4:t.sent().forEach(function(t){n.componentFactory.callbackTextMeasureResult(t.measureId,t)}),t.label=5;case 5:return[2]}})})},n);function n(){}o.TextMeasurer=t},{"./components/component_factory":26,"./components/dom_utils":29,"./env":42,"./router":47}],49:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.WindowInfo=void 0;var n=t("./env"),t=(i.prototype.updateWindowInfo=function(){var t;n.MPEnv.platformType===n.PlatformType.wxMiniProgram||n.MPEnv.platformType===n.PlatformType.swanMiniProgram?this.engine.sendMessage(JSON.stringify({type:"window_info",message:{window:{width:n.MPEnv.platformScope.getSystemInfoSync().screenWidth,height:n.MPEnv.platformScope.getSystemInfoSync().screenHeight,padding:{top:n.MPEnv.platformScope.getSystemInfoSync().statusBarHeight,bottom:n.MPEnv.platformScope.getSystemInfoSync().screenHeight-(null===(t=n.MPEnv.platformScope.getSystemInfoSync().safeArea)||void 0===t?void 0:t.bottom)}},devicePixelRatio:n.MPEnv.platformScope.getSystemInfoSync().pixelRatio}})):this.engine.sendMessage(JSON.stringify({type:"window_info",message:{window:{width:document.body.clientWidth,height:window.innerHeight,padding:{top:0,bottom:0}},devicePixelRatio:devicePixelRatio}}))},i);function i(t){this.engine=t}o.WindowInfo=t},{"./env":42}],50:[function(t,e,o){"use strict";var n=Object.prototype.hasOwnProperty,h="~";function i(){}function r(t,e,o){this.fn=t,this.context=e,this.once=o||!1}function s(t,e,o,n,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");i=new r(o,n||t,i),e=h?h+e:e;return t._events[e]?t._events[e].fn?t._events[e]=[t._events[e],i]:t._events[e].push(i):(t._events[e]=i,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(h=!1)),a.prototype.eventNames=function(){var t,e,o=[];if(0===this._eventsCount)return o;for(e in t=this._events)n.call(t,e)&&o.push(h?e.slice(1):e);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},a.prototype.listeners=function(t){var t=h?h+t:t,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var o=0,n=e.length,i=new Array(n);o<n;o++)i[o]=e[o].fn;return i},a.prototype.listenerCount=function(t){t=h?h+t:t,t=this._events[t];return t?t.fn?1:t.length:0},a.prototype.emit=function(t,e,o,n,i,r){var s=h?h+t:t;if(!this._events[s])return!1;var a,l=this._events[s],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,o),!0;case 4:return l.fn.call(l.context,e,o,n),!0;case 5:return l.fn.call(l.context,e,o,n,i),!0;case 6:return l.fn.call(l.context,e,o,n,i,r),!0}for(d=1,a=new Array(c-1);d<c;d++)a[d-1]=arguments[d];l.fn.apply(l.context,a)}else for(var u,p=l.length,d=0;d<p;d++)switch(l[d].once&&this.removeListener(t,l[d].fn,void 0,!0),c){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,e);break;case 3:l[d].fn.call(l[d].context,e,o);break;case 4:l[d].fn.call(l[d].context,e,o,n);break;default:if(!a)for(u=1,a=new Array(c-1);u<c;u++)a[u-1]=arguments[u];l[d].fn.apply(l[d].context,a)}return!0},a.prototype.on=function(t,e,o){return s(this,t,e,o,!1)},a.prototype.once=function(t,e,o){return s(this,t,e,o,!0)},a.prototype.removeListener=function(t,e,o,n){t=h?h+t:t;if(!this._events[t])return this;if(!e)return l(this,t),this;var i=this._events[t];if(i.fn)i.fn!==e||n&&!i.once||o&&i.context!==o||l(this,t);else{for(var r=0,s=[],a=i.length;r<a;r++)(i[r].fn!==e||n&&!i[r].once||o&&i[r].context!==o)&&s.push(i[r]);s.length?this._events[t]=1===s.length?s[0]:s:l(this,t)}return this},a.prototype.removeAllListeners=function(t){return t?(t=h?h+t:t,this._events[t]&&l(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=h,a.EventEmitter=a,void 0!==e&&(e.exports=a)},{}]},{},[43])(43)});
